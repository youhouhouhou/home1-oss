<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-04-29 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170429" />
    <meta http-equiv="Content-Language" content="en" />
    <title>oss-lib-security &#x2013; 如何生成RSA密钥</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DOCUMENTATION <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="README.html"  title="README">README</a>
</li>
                  
                      <li>      <a href="USER_GUIDE_FOR_RESTFUL.html"  title="RestFul应用接入lib-security">RestFul应用接入lib-security</a>
</li>
                  
                      <li>      <a href="USER_GUIDE_FOR_TEMPLATE.html"  title="Template应用接入lib-security">Template应用接入lib-security</a>
</li>
                  
                      <li>      <a href="ABOUT_ME.html"  title="关于lib-security">关于lib-security</a>
</li>
                  
                      <li>      <a href="CONTRIBUTION.html"  title="相关阅读">相关阅读</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="oss-lib-security-spring-boot-1.4.1.RELEASE/index.html"  title="oss-lib-security-spring-boot-1.4.1.RELEASE">oss-lib-security-spring-boot-1.4.1.RELEASE</a>
</li>
                  
                      <li>      <a href="oss-lib-security-spring-boot-1.4.2.RELEASE/index.html"  title="oss-lib-security-spring-boot-1.4.2.RELEASE">oss-lib-security-spring-boot-1.4.2.RELEASE</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="integration.html"  title="CI Management">CI Management</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Summary">Summary</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="modules.html"  title="Project Modules">Project Modules</a>
</li>
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                                  <li>      <a href="license.html"  title="Licenses">Licenses</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="checkstyle.html"  title="Checkstyle">Checkstyle</a>
</li>
                                  <li>      <a href="xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="taglist.html"  title="Tag List">Tag List</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>oss-lib-security</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2017-04-29
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.8.OSS-SNAPSHOT
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">DOCUMENTATION</li>
                              
      <li>
  
                          <a href="README.html" title="README">
          <span class="none"></span>
        README</a>
            </li>
                
      <li>
  
                          <a href="USER_GUIDE_FOR_RESTFUL.html" title="RestFul应用接入lib-security">
          <span class="none"></span>
        RestFul应用接入lib-security</a>
            </li>
                
      <li>
  
                          <a href="USER_GUIDE_FOR_TEMPLATE.html" title="Template应用接入lib-security">
          <span class="none"></span>
        Template应用接入lib-security</a>
            </li>
                
      <li>
  
                          <a href="ABOUT_ME.html" title="关于lib-security">
          <span class="none"></span>
        关于lib-security</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>相关阅读</a>
          </li>
                              <li class="nav-header">Modules</li>
                              
      <li>
  
                          <a href="oss-lib-security-spring-boot-1.4.1.RELEASE/index.html" title="oss-lib-security-spring-boot-1.4.1.RELEASE">
          <span class="none"></span>
        oss-lib-security-spring-boot-1.4.1.RELEASE</a>
            </li>
                
      <li>
  
                          <a href="oss-lib-security-spring-boot-1.4.2.RELEASE/index.html" title="oss-lib-security-spring-boot-1.4.2.RELEASE">
          <span class="none"></span>
        oss-lib-security-spring-boot-1.4.2.RELEASE</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                          
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1><a href="#arsa">&#x5982;&#x4f55;&#x751f;&#x6210;RSA&#x5bc6;&#x94a5;</a></h1>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># &#x8bbe;&#x7f6e;key&#x957f;&#x5ea6;
key_size=1024;

# &#x751f;&#x6210;PKCS#1&#x79c1;&#x94a5;
openssl genrsa -out rsa_${key_size}_priv_pkcs1.pem ${key_size}
# &#x6839;&#x636e;&#x79c1;&#x94a5;&#x751f;&#x6210;&#x516c;&#x94a5;, &#x9ed8;&#x8ba4;&#x4e3a;x509&#x683c;&#x5f0f;
openssl rsa -pubout -in rsa_${key_size}_priv_pkcs1.pem -out rsa_${key_size}_pub.pem

# &#x751f;&#x6210; &#x7528;&#x4e8e;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;, &#x53bb;&#x6389;&#x6ce8;&#x91ca;&#x7684;, &#x5355;&#x884c;&#x7684;&#x79c1;&#x94a5;
cat rsa_${key_size}_priv_pkcs1.pem | grep -v '\-' | sed -e :a -e '$!N; s/\n//; ta'
# or
cat rsa_${key_size}_priv_pkcs1.pem | grep -v '\-' | awk '!/0$/{printf $0}/0$/'

# &#x751f;&#x6210; &#x7528;&#x4e8e;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;, &#x53bb;&#x6389;&#x6ce8;&#x91ca;&#x7684;, &#x5355;&#x884c;&#x7684;&#x516c;&#x94a5;
cat rsa_${key_size}_pub.pem | grep -v '\-' | sed -e :a -e '$!N; s/\n//; ta'
# or
cat rsa_${key_size}_pub.pem | grep -v '\-' | awk '!/0$/{printf $0}/0$/'

# &#x751f;&#x6210; &#x7528;&#x4e8e;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;, &#x53bb;&#x6389;&#x6ce8;&#x91ca;&#x7684;, &#x5355;&#x884c;&#x7684;&#x5bc6;&#x94a5;&#x5bf9;
echo &quot;$(cat rsa_${key_size}_priv_pkcs1.pem | grep -v '\-' | sed -e :a -e '$!N; s/\n//; ta'):$(cat rsa_${key_size}_pub.pem | grep -v '\-' | sed -e :a -e '$!N; s/\n//; ta')&quot;

# &#x5c06;PKCS#1&#x79c1;&#x94a5;&#x8f6c;&#x6210;PKCS#8&#x79c1;&#x94a5;
openssl pkcs8 -topk8 -in rsa_${key_size}_priv_pkcs1.pem -out rsa_${key_size}_priv_pkcs8.pem -nocrypt
</pre></div></div>

<h1><a href="#javascript-">Javascript &#x52a0;&#x5bc6;&#x5e93;</a></h1>

<p><a class="externalLink" href="https://github.com/travist/jsencrypt">&#x652f;&#x6301;PKCS#1&#x7684;RSA&#x5e93;</a></p>

<p>&#x5bc6;&#x94a5;&#x6587;&#x4ef6;&#x6700;&#x7ec8;&#x5c06;&#x6570;&#x636e;&#x901a;&#x8fc7;Base64&#x7f16;&#x7801;&#x8fdb;&#x884c;&#x5b58;&#x50a8; RFC2045&#x4e2d;&#x89c4;&#x5b9a;: The encoded output stream must be represented in lines of no more than 76 characters each Base64&#x7f16;&#x7801;&#x7684;&#x6570;&#x636e;&#x6bcf;&#x884c;&#x6700;&#x591a;&#x4e0d;&#x8d85;&#x8fc7;76&#x5b57;&#x7b26;, &#x8d85;&#x957f;&#x6570;&#x636e;&#x8981;&#x6309;&#x884c;&#x5206;&#x5272;</p>

<p><a class="externalLink" href="https://github.com/vibornoff/asmcrypto.js">https://github.com/vibornoff/asmcrypto.js</a></p>

<div class="section">
<h2><a name="a"></a><a href="#a">&#x53c2;&#x8003;&#x6587;&#x6863;</a></h2>

<div class="section">
<h3><a name="security_"></a><a href="#security-">security &#x767b;&#x9646;&#x9875;</a></h3>

<p><a class="externalLink" href="http://docs.spring.io/spring-security/site/docs/4.1.3.RELEASE/guides/html5/form-javaconfig.html">http://docs.spring.io/spring-security/site/docs/4.1.3.RELEASE/guides/html5/form-javaconfig.html</a> <a class="externalLink" href="https://spring.io/guides/gs/securing-web/">https://spring.io/guides/gs/securing-web/</a></p>
</div>
<div class="section">
<h3><a name="Security_"></a><a href="#security-">Security &#x6301;&#x4e45;&#x5c42;</a></h3>

<p><a class="externalLink" href="http://www.mkyong.com/spring-security/spring-security-hibernate-annotation-example/">http://www.mkyong.com/spring-security/spring-security-hibernate-annotation-example/</a></p>
</div>
<div class="section">
<h3><a name="Security_EL"></a><a href="#security-el">Security EL&#x6ce8;&#x89e3;</a></h3>

<p><a class="externalLink" href="http://docs.spring.io/spring-security/site/docs/4.1.0.RELEASE/reference/htmlsingle/#el-pre-post-annotations">http://docs.spring.io/spring-security/site/docs/4.1.0.RELEASE/reference/htmlsingle/#el-pre-post-annotations</a> <a class="externalLink" href="http://websystique.com/spring-security/spring-security-4-method-security-using-preauthorize-postauthorize-secured-el/">http://websystique.com/spring-security/spring-security-4-method-security-using-preauthorize-postauthorize-secured-el/</a></p>
</div>
<div class="section">
<h3><a name="Security_"></a><a href="#security-">Security &#x6d4b;&#x8bd5;</a></h3>

<p><a class="externalLink" href="https://www.petrikainulainen.net/programming/spring-framework/integration-testing-of-spring-mvc-applications-security/">https://www.petrikainulainen.net/programming/spring-framework/integration-testing-of-spring-mvc-applications-security/</a></p>
</div>
<div class="section">
<h3><a name="Security"></a><a href="#security">Security&#x53c2;&#x8003;&#x5b9e;&#x73b0;</a></h3>

<p><a class="externalLink" href="https://docs.stormpath.com/java/spring-boot-web/about.html">https://docs.stormpath.com/java/spring-boot-web/about.html</a> org.springframework.security.web.access.ExceptionTranslationFilter</p>
</div>
<div class="section">
<h3><a name="DEBUG"></a><a href="#debug">DEBUG</a></h3>

<p>&#x91cd;&#x70b9;&#x67e5;&#x770b;</p>

<p>configurer&#x7684;&#x987a;&#x5e8f;: cn.home1.oss.lib.security.starter.WebApplicationSecurityAutoConfiguration#securityConfigurers</p>

<p>filterChains&#x7684;&#x5185;&#x5bb9;&#x548c;filters, &#x5c24;&#x5176;&#x6ce8;&#x610f;&#x53ea;&#x5e94;&#x6709;&#x4e00;&#x4e2a;AnyRequestMatcher. org.springframework.security.web.FilterChainProxy#getFilters org.springframework.security.web.FilterChainProxy#doFilterInternal</p>

<p>&#x77ed;&#x4fe1;&#x9a8c;&#x8bc1;&#x7801; &#x5b57;&#x6bb5; verifycode</p>

<p>curl -i -c COOKIE &#x2013;referer &#x201c;<a class="externalLink" href="http://127.0.0.1:8080">http://127.0.0.1:8080</a>&#x201d; <a class="externalLink" href="http://127.0.0.1:8080/login/sendCode">http://127.0.0.1:8080/login/sendCode</a></p>

<h1><a href="#security">Security</a></h1>

<p>see: <a class="externalLink" href="https://spring.io/guides/tutorials/spring-security-and-angular-js/">https://spring.io/guides/tutorials/spring-security-and-angular-js/</a> see: <a class="externalLink" href="https://spring.io/blog/2015/01/12/the-login-page-angular-js-and-spring-security-part-ii">https://spring.io/blog/2015/01/12/the-login-page-angular-js-and-spring-security-part-ii</a> see: <a class="externalLink" href="http://stackoverflow.com/questions/32498868/custom-login-form-configure-spring-security-to-get-a-json-response">http://stackoverflow.com/questions/32498868/custom-login-form-configure-spring-security-to-get-a-json-response</a></p>

<h1><a href="#ahttp-basic-auth">&#x6d4b;&#x8bd5;http basic auth</a></h1>

<p>curl -i -X GET -u admin:admin <a class="externalLink" href="http://127.0.0.1:8080/api/hello">http://127.0.0.1:8080/api/hello</a> curl -i -X GET -u admin:badpassword <a class="externalLink" href="http://127.0.0.1:8080/api/hello">http://127.0.0.1:8080/api/hello</a> curl -i -X GET -u admin:badpassword &#x2018;<a class="externalLink" href="http://127.0.0.1:8080/api/hello?type=xml">http://127.0.0.1:8080/api/hello?type=xml</a>&#x2019;</p>

<h1><a href="#a-">&#x672c;&#x5730;&#x5f00;&#x53d1;&#x73af;&#x5883; &#x767b;&#x9646;&#x518d;&#x767b;&#x51fa;</a></h1>

<p>curl -X POST -L -c COOKIE &#x2013;data &#x201c;username=lendAuditor&amp;password=lendAuditor&amp;verifycode=code&#x201d; <a class="externalLink" href="http://127.0.0.1:8080/login">http://127.0.0.1:8080/login</a> curl -X GET -L -b COOKIE -c COOKIE <a class="externalLink" href="http://127.0.0.1:8080/logout">http://127.0.0.1:8080/logout</a></p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># when no csrf
curl -i -X POST -c COOKIE --data &quot;username=test_admin&amp;password=admin_pass&quot; http://127.0.0.1:8080/login
curl -X GET -b COOKIE http://127.0.0.1:8080/secured/forAdminOnly


#-H &quot;Accept: */*&quot; -H &quot;Content-Type: application/json&quot;
curl -i -X GET -c COOKIE http://127.0.0.1:8080/login
JSESSIONID=$(cat COOKIE | grep JSESSIONID | awk '{print $7}')
XSRF_TOKEN=$(cat COOKIE | grep XSRF-TOKEN | awk '{print $7}')
curl -i -X POST -L -b COOKIE -H &quot;X-CSFR-TOKEN: ${XSRF_TOKEN}&quot; --data &quot;username=admin&amp;password=admin&quot; http://127.0.0.1:8080/login
#curl -i -X POST -L --cookie &quot;JSESSIONID=${JSESSIONID};&quot; -H &quot;X-CSFR-TOKEN: ${XSRF_TOKEN}&quot; --data &quot;username=admin&amp;password=admin&quot; http://127.0.0.1:8080/login
curl -i -X POST -L --cookie &quot;JSESSIONID=${JSESSIONID};&quot; -H &quot;X-XSRF-TOKEN: ${XSRF_TOKEN}&quot; --data &quot;username=admin&amp;password=admin&quot; http://127.0.0.1:8080/login
</pre></div></div>

<p>curl -i <a class="externalLink" href="http://127.0.0.1:8080/api/privilegeTest/requireRoleAdmin">http://127.0.0.1:8080/api/privilegeTest/requireRoleAdmin</a> curl -i <a class="externalLink" href="http://127.0.0.1:8080/api/privilegeTest/requireRoleLendAuditor">http://127.0.0.1:8080/api/privilegeTest/requireRoleLendAuditor</a> curl -i <a class="externalLink" href="http://127.0.0.1:8080/api/privilegeTest/requirePrivilegeCouponSend">http://127.0.0.1:8080/api/privilegeTest/requirePrivilegeCouponSend</a> curl -i <a class="externalLink" href="http://127.0.0.1:8080/api/privilegeTest/requirePrivilegeCouponView">http://127.0.0.1:8080/api/privilegeTest/requirePrivilegeCouponView</a></p>
</div></div>
<div class="section">
<h2><a name="JWT"></a><a href="#jwt">JWT</a></h2>

<p><a class="externalLink" href="https://jwt.io/">https://jwt.io/</a> <a class="externalLink" href="https://github.com/jwtk/jjwt">https://github.com/jwtk/jjwt</a></p>

<p><a class="externalLink" href="http://connect2id.com/products/nimbus-jose-jwt/generator">http://connect2id.com/products/nimbus-jose-jwt/generator</a> <a class="externalLink" href="https://github.com/mitreid-connect/json-web-key-generator">https://github.com/mitreid-connect/json-web-key-generator</a> <a class="externalLink" href="http://technicalrex.com/2015/02/20/stateless-authentication-with-spring-security-and-jwt">http://technicalrex.com/2015/02/20/stateless-authentication-with-spring-security-and-jwt</a></p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2017.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
