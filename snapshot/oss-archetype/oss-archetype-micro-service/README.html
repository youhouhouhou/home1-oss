<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-04-21 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170421" />
    <meta http-equiv="Content-Language" content="en" />
    <title>oss-archetype-micro-service &#x2013; OSS-ARCHETYPE-MICRO-SERVICE</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../index.html"  title="oss-archetype">oss-archetype</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DOCUMENTATION <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="README.html"  title="README">README</a>
</li>
                          </ul>
      </li>
                      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="integration.html"  title="CI Management">CI Management</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Summary">Summary</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="jdepend-report.html"  title="JDepend">JDepend</a>
</li>
                                  <li>      <a href="checkstyle.html"  title="Checkstyle">Checkstyle</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>oss-archetype-micro-service</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2017-04-21
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.6.OSS-SNAPSHOT
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../index.html" title="oss-archetype">
          <span class="none"></span>
        oss-archetype</a>
            </li>
                              <li class="nav-header">DOCUMENTATION</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>README</a>
          </li>
                                        <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                            
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>OSS-ARCHETYPE-MICRO-SERVICE</h1>

<ul>
  
<li><a href="#a">&#x7b80;&#x4ecb;</a></li>
  
<li><a href="#a">&#x4f7f;&#x7528;</a></li>
  
<li><a href="#a">&#x9879;&#x76ee;&#x67b6;&#x6784;</a></li>
  
<li><a href="#a">&#x76ee;&#x5f55;&#x7ed3;&#x6784;</a>
    
<ul>
      
<li><a href="#cish">ci.sh</a></li>
      
<li><a href="#src">src</a></li>
      
<li><a href="#service--client">service / client</a></li>
    </ul>
  </li>
  
<li><a href="#a">&#x9879;&#x76ee;&#x8bbe;&#x8ba1;&#x601d;&#x8def;</a>
    
<ul>
      
<li><a href="#a">&#x9879;&#x76ee;&#x6574;&#x4f53;&#x67b6;&#x6784;</a></li>
      
<li><a href="#service-">service &#x6a21;&#x5757;</a></li>
      
<li><a href="#client-">client &#x6a21;&#x5757;</a></li>
    </ul>
  </li>
  
<li><a href="#a">&#x6d4b;&#x8bd5;</a></li>
  
<li><a href="#a">&#x6d4b;&#x8bd5;&#x6837;&#x4f8b;</a></li>
  
<li><a href="#a">&#x6d4b;&#x8bd5;&#x6587;&#x4ef6;&#x7684;&#x5206;&#x7c7b;</a></li>
  
<li><a href="#a">&#x5bf9;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x548c;&#x7aef;&#x5230;&#x7aef;&#x6d4b;&#x8bd5;&#x7684;&#x589e;&#x5f3a;</a></li>
  
<li><a href="#apomxml">&#x901a;&#x8fc7;pom.xml&#x914d;&#x7f6e;&#x4f9d;&#x8d56;&#x670d;&#x52a1;</a>
    
<ul>
      
<li><a href="#a">&#x5982;&#x4f55;&#x786e;&#x5b9a;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x5df2;&#x7ecf;&#x6b63;&#x786e;&#x542f;&#x52a8;&#xff1f;</a></li>
    </ul>
  </li>
  
<li><a href="#a">&#x5efa;&#x8bae;</a></li>
  
<li><a href="#a">&#x6301;&#x7eed;&#x96c6;&#x6210;</a></li>
  
<li><a href="#a-profiles-">&#x9879;&#x76ee; profiles &#x8bbe;&#x7f6e;</a></li>
  
<li><a href="#cish">ci.sh&#x8bf4;&#x660e;</a></li>
  
<li><a href="#a">&#x6211;&#x5382;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x5b9e;&#x8df5;</a></li>
  
<li><a href="#a">&#x751f;&#x6210;&#x6587;&#x6863;&#x53ca;&#x9879;&#x76ee;&#x62a5;&#x544a;</a></li>
  
<li><a href="#a">&#x6784;&#x5efa;&#x3001;&#x53d1;&#x5e03;&#x548c;&#x90e8;&#x7f72;&#x65b9;&#x6848;</a></li>
  
<li><a href="#a">&#x672f;&#x8bed;&#x5b9a;&#x4e49;</a></li>
  
<li><a href="#adocker">&#x6784;&#x5efa;Docker&#x955c;&#x50cf;&#x3002;</a></li>
  
<li><a href="#aci">&#x901a;&#x8fc7;ci&#x6267;&#x884c;&#x955c;&#x50cf;&#x7684;&#x6784;&#x5efa;&#x4e0e;&#x53d1;&#x5e03;&#x3002;</a></li>
  
<li><a href="#a">&#x6784;&#x5efa;&#x4e0e;&#x53d1;&#x5e03;&#x5206;&#x79bb;</a></li>
</ul>

<div class="section">
<h2><a name="a"></a><a href="#a">&#x7b80;&#x4ecb;</a></h2>

<p>&#x672c;&#x9879;&#x76ee;&#x7528;&#x4e8e;&#x751f;&#x6210;&#x5fae;&#x670d;&#x52a1;&#x67b6;&#x6784;&#x7684;&#x9879;&#x76ee;&#xff0c;C/S&#x67b6;&#x6784;&#x3002;&#x9879;&#x76ee;&#x4e2d;&#x5305;&#x542b;&#x4ee5;&#x4e0b;&#x5185;&#x5bb9;&#xff1a; - &#x57fa;&#x672c;&#x7684;oss dependency - &#x5fae;&#x670d;&#x52a1;&#x53ca;&#x5176;client&#x9879;&#x76ee;&#x3002; - &#x5bb9;&#x5668;&#x5316;&#x811a;&#x672c; - &#x751f;&#x6210;&#x7684;&#x9879;&#x76ee;&#x5305;&#x542b;&#x90e8;&#x5206;&#x6837;&#x4f8b;&#x4ee3;&#x7801;&#xff0c;&#x6f14;&#x793a;oss&#x7684;&#x57fa;&#x672c;&#x4f7f;&#x7528;&#x4ee5;&#x53ca;&#x6d4b;&#x8bd5;&#xff08;&#x5305;&#x62ec;&#x5355;&#x6d4b;&#x3001;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#xff09;&#x7684;demo&#x3002; - &#x6574;&#x5957;&#x7684;&#x8f6f;&#x4ef6;&#x5de5;&#x7a0b;&#x89e3;&#x51b3;&#x65b9;&#x6848;</p>
</div>
<div class="section">
<h2><a name="a"></a><a href="#a">&#x4f7f;&#x7528;</a></h2>

<p>&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x53ef;&#x4ee5;&#x901a;&#x8fc7; <tt>mvn archetype:generate</tt> &#x547d;&#x4ee4;&#xff0c;&#x57fa;&#x4e8e;oss archetype&#x751f;&#x6210;&#x5fae;&#x670d;&#x52a1;&#x67b6;&#x6784;&#x7684;&#x9879;&#x76ee;&#x3002;&#x5982;&#x4e0b;&#x6240;&#x793a;&#xff1a;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">    ARCHETYPE_VERSION=&quot;1.0.6.OSS-SNAPSHOT&quot;
    #ARCHETYPE_REPOSITORY=&quot;${INTERNAL_NEXUS}/content/groups/public&quot;
    ARCHETYPE_REPOSITORY=&quot;${LOCAL_NEXUS}/repository/maven-public&quot;

    groupId=&quot;com.yirendai&quot;
    artifactId=&quot;micro&quot;
    package=&quot;com.yirendai&quot;
    version=&quot;0.0.1-SNAPSHOT&quot;

    mvn archetype:generate \
        -DarchetypeGroupId=com.yirendai.infra \
        -DarchetypeArtifactId=oss-archetype-micro-service \
        -DgroupId=${groupId} \
        -DartifactId=${artifactId} \
        -Dversion=${version} \
        -Dpackage=${package} \
        -DarchetypeVersion=${ARCHETYPE_VERSION} \
        -DarchetypeRepository=${ARCHETYPE_REPOSITORY}
</pre></div></div>

<p>&#x901a;&#x8fc7;&#x4ee5;&#x4e0a;&#x547d;&#x4ee4;&#xff0c;&#x751f;&#x6210; artifactId &#x4e3a; micro&#xff0c;groupId &#x4e3a; com.yirendai &#x7684;&#x9879;&#x76ee;&#x3002;</p>
</div>
<div class="section">
<h2><a name="a"></a><a href="#a">&#x9879;&#x76ee;&#x67b6;&#x6784;</a></h2>

<div class="section">
<h3><a name="a"></a><a href="#a">&#x76ee;&#x5f55;&#x7ed3;&#x6784;</a></h3>

<p>&#x4ee5;&#x4e0a;&#x9762;&#x751f;&#x6210;&#x7684; micro &#x9879;&#x76ee;&#x4e3a;&#x4f8b;&#xff0c;&#x76ee;&#x5f55;&#x7ec4;&#x7ec7;&#x5982;&#x4e0b;&#x6240;&#x793a;&#x3002;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">    .
    |--- ci.sh
    |--- micro-client/
    |--- micro-service/
    |--- pom.xml
    |--- README.md
    `--- src
</pre></div></div>

<p>&#x901a;&#x8fc7;oss-archetype-micro-service&#x751f;&#x6210;&#x7684;&#x5fae;&#x670d;&#x52a1;&#x9aa8;&#x67b6;&#x9879;&#x76ee;&#x662f;&#x4e00;&#x4e2a;&#x591a;&#x6a21;&#x5757;&#x7684;&#x7236;&#x5b50;&#x9879;&#x76ee;&#xff0c;&#x5404;&#x76ee;&#x5f55;&#x53ca;&#x6587;&#x4ef6;&#x8bf4;&#x660e;&#x5982;&#x4e0b;&#x3002;</p>

<div class="section">
<h4><a name="ci.sh"></a>ci.sh</h4>

<p>&#x6301;&#x7eed;&#x96c6;&#x6210;&#x7684;&#x5177;&#x4f53;&#x6267;&#x884c;&#x811a;&#x672c;&#xff0c;&#x53ef;&#x7528;&#x4e8e;gitlab-ci&#x6216;&#x8005;&#x5176;&#x4ed6;&#x7c7b;&#x4f3c;travis&#x7684;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x670d;&#x52a1;&#x3002;</p>
</div>
<div class="section">
<h4><a name="src"></a><a href="#src">src</a></h4>

<p><b>&#x7236;&#x9879;&#x76ee;src&#x76ee;&#x5f55;&#x6587;&#x4ef6;&#x7ec4;&#x7ec7;&#x7ed3;&#x6784;</b></p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">    .
    &#x251c;&#x2500;&#x2500; main/
    &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; checkstyle/
    &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; google_checks_6.19.xml
    &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; maven/
    &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; settings-internal.xml
    &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; pmd/
    &#x2502;&#xa0;&#xa0;     &#x2514;&#x2500;&#x2500; pmd-ruleset-5.3.5.xml
    &#x251c;&#x2500;&#x2500; readme/
    &#x2514;&#x2500;&#x2500; site/
        &#x251c;&#x2500;&#x2500; markdown
        &#x2514;&#x2500;&#x2500; site.xml
</pre></div></div>

<p><b>&#x76ee;&#x5f55;&#x8bf4;&#x660e;</b><br />+ main&#x76ee;&#x5f55;  - &#x5b58;&#x653e;maven&#x7684;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#xff0c;&#x4ee5;&#x53ca;checkstyle&#x4ee5;&#x53ca;pmd&#x63d2;&#x4ef6;&#x914d;&#x7f6e;&#x3002;  - TODO: &#x7528;&#x6237;&#x5982;&#x4f55;&#x4f7f;&#x7528;&#xff1f; + readme&#x76ee;&#x5f55;  - &#x7528;&#x4e8e;&#x5b58;&#x653e;&#x9879;&#x76ee;&#x6839;&#x76ee;&#x5f55;&#x4e0b;README.md&#x4e2d;&#x5f15;&#x7528;&#x7684;&#x56fe;&#x7247;&#x7b49;&#x9759;&#x6001;&#x6587;&#x4ef6; + site&#x76ee;&#x5f55;  - &#x5b58;&#x653e;&#x9879;&#x76ee;&#x7684;&#x6587;&#x6863;&#xff0c;&#x7528;&#x4e8e;&#x751f;&#x6210;maven&#x9759;&#x6001;&#x7f51;&#x7ad9;&#x4ee5;&#x53ca;gitbook&#x3002;</p>
</div>
<div class="section">
<h4><a name="service__client"></a><a href="#service-client">service / client</a></h4>

<p>&#x8fd9;&#x56db;&#x4e2a;&#x76ee;&#x5f55;&#x662f;&#x7236;&#x9879;&#x76ee;&#x7684;&#x4e24;&#x4e2a;&#x5b50;&#x9879;&#x76ee;&#xff0c;&#x5404;&#x9879;&#x76ee;&#x7684;&#x7b80;&#x8981;&#x8bf4;&#x660e;&#x5982;&#x4e0b;&#xff1a; </p>

<ul>
  
<li>service(&#x672c;&#x6848;&#x4f8b;&#x4e2d;&#x4e3a; micro-service&#xff0c;&#x4e0b;&#x540c;) &#x9879;&#x76ee;&#x4e3a;&#x5fae;&#x670d;&#x52a1;&#x7684;&#x5177;&#x4f53;&#x4e1a;&#x52a1;&#x903b;&#x8f91;&#x5b9e;&#x73b0;&#x3002;</li>
  
<li>client &#x9879;&#x76ee;&#x63d0;&#x4f9b; service &#x9879;&#x76ee;&#x7684; sdk&#xff0c;&#x5bf9; service-test &#x7684;&#x8fdc;&#x7a0b;&#x8c03;&#x7528;&#x5fc5;&#x987b;&#x901a;&#x8fc7; client&#x3002;</li>
</ul>

<p><b>&#x5b50;&#x9879;&#x76ee;&#x6587;&#x4ef6;&#x7ec4;&#x7ec7;&#x7ed3;&#x6784;</b> </p>

<p>&#x4ee5;service&#x9879;&#x76ee;&#x4e3a;&#x4f8b;&#xff0c;&#x5982;&#x4e0b;&#x56fe;&#x6240;&#x793a;&#xff1a;</p>

<p><img src="src/readme/service-dir-file-architecture.png" alt="service项目目录组织" /> </p>

<p><b>&#x5b50;&#x9879;&#x76ee;src&#x76ee;&#x5f55;&#x8bf4;&#x660e;</b> </p>

<ul>
  
<li>src
    
<ul>
      
<li>main
        
<ul>
          
<li>asciidoc <tt>&#x65b0;&#x589e;&#x76ee;&#x5f55;&#x3002;&#x4e0e;Rest Docs&#x76f8;&#x5173;&#x7684;&#x76ee;&#x5f55;</tt></li>
          
<li>docker <tt>&#x65b0;&#x589e;&#x76ee;&#x5f55;&#x3002;&#x9664;Dockerfile&#x4e4b;&#x5916;&#xff0c;&#x5c06;jar&#x6253;&#x5305;&#x6210;docker&#x955c;&#x50cf;&#x9700;&#x8981;&#x7684;&#x7684;&#x811a;&#x672c;&#x3001;&#x9759;&#x6001;&#x8d44;&#x6e90;&#x7b49;</tt></li>
          
<li>java <tt>&#x4ee3;&#x7801;&#x6587;&#x4ef6;</tt></li>
          
<li>resources <tt>&#x914d;&#x7f6e;&#x53ca;&#x8d44;&#x6e90;&#x6587;&#x4ef6;</tt></li>
          
<li>docker <tt>Dockerfile&#x6587;&#x4ef6;&#xff0c;&#x5305;&#x542b;&#x73af;&#x5883;&#x53d8;&#x91cf;</tt></li>
        </ul>
      </li>
      
<li>readme <tt>&#x5b58;&#x653e;&#x5b50;&#x9879;&#x76ee;README.md&#x5f15;&#x7528;&#x7684;&#x9759;&#x6001;&#x6587;&#x4ef6;</tt></li>
      
<li>site <tt>&#x5b58;&#x653e;&#x7528;&#x4e8e;&#x751f;&#x6210;&#x9879;&#x76ee;maven site&#x9759;&#x6001;&#x9875;&#x9762;&#x7684;&#x7d22;&#x5f15;&#x53ca;markdown&#x6587;&#x4ef6;</tt>
        
<ul>
          
<li>site.xml <tt>&#x4ecb;&#x7ecd;&#x548c;&#x4f7f;&#x7528;&#x8bf7;&#x53c2;&#x7167;[&#x8fd9;&#x7bc7;&#x6587;&#x6863;](TODO)</tt></li>
        </ul>
      </li>
      
<li>test <tt>&#x6d4b;&#x8bd5;&#x4ee3;&#x7801;&#x53ca;resource&#x76ee;&#x5f55;&#xff0c;</tt></li>
    </ul>
  </li>
</ul>

<blockquote>
  
<p>&#x5176;&#x4ed6;&#x9879;&#x76ee;&#x7684;&#x76ee;&#x5f55;&#x7ec4;&#x7ec7;&#x65b9;&#x5f0f;&#x4e0e; service &#x7c7b;&#x4f3c;&#xff0c;&#x4e0d;&#x518d;&#x8d58;&#x8ff0;&#x3002;client &#x9879;&#x76ee;&#x4e2d;&#x6ca1;&#x6709; src/main/docker &#x76ee;&#x5f55;&#xff0c;&#x56e0;&#x4e3a;&#x5bf9;&#x5b83;&#x4eec;&#x7684;&#x8bbf;&#x95ee;&#x662f;&#x901a;&#x8fc7;&#x672c;&#x5730;&#x8c03;&#x7528;&#xff0c;&#x4e0d;&#x9700;&#x8981;&#x542f;&#x52a8;&#x670d;&#x52a1;&#x3002;</p>
</blockquote>
</div></div>
<div class="section">
<h3><a name="a"></a><a href="#a">&#x9879;&#x76ee;&#x8bbe;&#x8ba1;&#x601d;&#x8def;</a></h3>

<div class="section">
<h4><a name="a"></a><a href="#a">&#x9879;&#x76ee;&#x6574;&#x4f53;&#x67b6;&#x6784;</a></h4>

<p><img src="src/readme/micro-service-architecture.png" alt="微服务项目架构图" /></p>

<p>&#x4e0a;&#x56fe;&#x662f;&#x7b80;&#x5316;&#x7684;&#x5fae;&#x670d;&#x52a1;&#x7684;RPC&#x6a21;&#x578b;&#x3002; + &#x865a;&#x7ebf;&#x6807;&#x660e;&#x5404;&#x6a21;&#x5757;&#x4e4b;&#x95f4;&#x7684;&#x4f9d;&#x8d56;&#x5173;&#x7cfb;&#x3002; + client &lt;&#x2013;&gt; service &#x4e4b;&#x95f4;&#x901a;&#x8fc7;&#x5fae;&#x670d;&#x52a1;RPC&#x8fdb;&#x884c;&#x901a;&#x4fe1;&#x3002; + &#x670d;&#x52a1;&#x63d0;&#x4f9b;&#x65b9;&#x4e3a;P&#xff0c;&#x670d;&#x52a1;&#x7684;&#x6d88;&#x8d39;&#x8005;&#x4e3a;C&#x3002; + P&#x540c;&#x65f6;&#x53ef;&#x4ee5;&#x662f;&#x5176;&#x4ed6;&#x670d;&#x52a1;&#x7684;&#x6d88;&#x8d39;&#x8005;&#x6216;&#x8005;&#x63d0;&#x4f9b;&#x65b9;&#xff0c;C&#x4e5f;&#x662f;&#x3002;</p>

<p>&#x4e0a;&#x6587;&#x8bb2;&#x5230;&#x5fae;&#x670d;&#x52a1;&#x4f53;&#x7cfb;&#x91cc;&#x4e00;&#x4e2a;&#x5b8c;&#x6574;&#x7684;&#x9879;&#x76ee;&#x4f1a;&#x5305;&#x542b;&#x4e24;&#x4e2a;&#x5b50;&#x9879;&#x76ee;&#x3002;&#x5982;&#x4e0b;&#x662f;&#x5404;&#x5b50;&#x9879;&#x76ee;&#x7684;&#x8be6;&#x7ec6;&#x8bf4;&#x660e;&#x3002;</p>
</div>
<div class="section">
<h4><a name="service_"></a><a href="#service-">service &#x6a21;&#x5757;</a></h4>

<p>service &#x9879;&#x76ee;&#x662f;&#x4e1a;&#x52a1;&#x903b;&#x8f91;&#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;&#xff0c;&#x5b83;&#x5f80;&#x5f80;&#x7528;&#x4f5c;&#x5176;&#x4ed6;&#x670d;&#x52a1;&#x7684;&#x670d;&#x52a1;&#x63d0;&#x4f9b;&#x8005;&#x6216;&#x6d88;&#x8d39;&#x8005;&#x3002;</p>

<blockquote>
  
<p>&#x7cfb;&#x7edf;&#x542f;&#x52a8;&#x4e4b;&#x540e;&#xff0c;&#x4f1a;&#x5728; eureka &#x4e0a;&#x8fdb;&#x884c;&#x6ce8;&#x518c;&#xff0c;&#x65b9;&#x4fbf;&#x670d;&#x52a1;&#x6d88;&#x8d39;&#x65b9;&#x901a;&#x8fc7;&#x540d;&#x5b57;&#x627e;&#x5230;&#x5177;&#x4f53;&#x7684;&#x5730;&#x5740;&#x3002;</p>
</blockquote>
</div>
<div class="section">
<h4><a name="client_"></a><a href="#client-">client &#x6a21;&#x5757;</a></h4>

<p>client &#x9879;&#x76ee;&#x4f5c;&#x4e3a; service &#x9879;&#x76ee;&#x7684; sdk&#xff0c;&#x5fc5;&#x987b;&#x7531;&#x670d;&#x52a1;&#x63d0;&#x4f9b;&#x65b9;&#x7684;&#x5f00;&#x53d1;&#x8005;&#x63d0;&#x4f9b;, &#x4f9b;&#x670d;&#x52a1;&#x7684;&#x6d88;&#x8d39;&#x65b9;&#x5f15;&#x5165;&#x4ee5;&#x8fbe;&#x5230;&#x8bbf;&#x95ee; service &#x670d;&#x52a1;&#x7684;&#x76ee;&#x7684;&#x3002; </p>

<p>&#x63a5;&#x5165;OSS&#x7684;RPC&#x6846;&#x67b6;&#x7684;&#x670d;&#x52a1;&#x63d0;&#x4f9b;&#x8005;&#xff0c;&#x9700;&#x8981;&#x4e3a;&#x6d88;&#x8d39;&#x8005;&#x63d0;&#x4f9b;&#x5ba2;&#x6237;&#x7aef;&#x5de5;&#x5177;&#x5305;&#xff0c;&#x57fa;&#x672c;&#x5f00;&#x53d1;&#x601d;&#x8def;&#x5982;&#x4e0b;&#xff1a;</p>

<ul>
  
<li>&#x901a;&#x8fc7;feign&#x8c03;&#x7528;&#x540e;&#x7aef;app&#x670d;&#x52a1;&#xff0c;&#x53ef;&#x4ee5;&#x5c06;hystrix&#x4ee5;&#x53ca;ribbon&#x6302;&#x5728;Feign&#x4e0a;&#xff0c;&#x52a0;&#x5165;&#x7194;&#x65ad;&#x673a;&#x5236;&#x548c;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x7b56;&#x7565;&#xff1b;</li>
  
<li>&#x9879;&#x76ee;&#x63a5;&#x5165;<tt>lib-security</tt>&#x7684;&#x573a;&#x666f;&#x4e0b;&#xff0c;&#x9700;&#x8981;&#x6ce8;&#x610f;&#x4ee5;&#x4e0b;&#x4e8b;&#x60c5;&#xff1a;
    
<ul>
      
<li>&#x670d;&#x52a1;&#x7684; provider &#x4e0e; consumer &#xff0c;&#x751f;&#x6210; cookie &#x548c; token &#x7684; jwtKey &#x4ee5;&#x53ca; cookieKey &#x5fc5;&#x987b;&#x4e00;&#x81f4;&#xff0c;&#x4e14;&#x5171;&#x7528;&#x4e00;&#x5957;&#x7528;&#x6237;&#x8ba4;&#x8bc1;&#x4ee5;&#x53ca;&#x6743;&#x9650;&#x903b;&#x8f91;&#xff1b;</li>
      
<li>&#x4f1a;&#x81ea;&#x52a8;&#x8bfb;&#x53d6;&#x8bf7;&#x6c42; header &#x7684; token&#x3001;cookie &#x7b49;&#x8ba4;&#x8bc1;&#x4fe1;&#x606f;&#xff0c;&#x5411;&#x540e;&#x7aef;&#x4f20;&#x9012;&#xff0c;&#x4e0d;&#x9700;&#x8981;&#x5728;SDK&#x91cc;&#x4f5c;&#x989d;&#x5916;&#x5904;&#x7406;&#x3002;</li>
      
<li>
      
<p>SDK &#x9879;&#x76ee;&#x5e94;&#x4fdd;&#x6301;&#x6700;&#x5c0f;&#x4f9d;&#x8d56;&#x96c6;&#x5408;&#x3002;</p>
      
<blockquote>
        
<p>&#x5176;&#x4ed6;&#x7684; Java &#x9879;&#x76ee;&#x4e5f;&#x5e94;&#x8be5;&#x5982;&#x6b64;&#xff0c;&#x4e0d;&#x8981;&#x6709;&#x591a;&#x4f59;&#x7684;&#x4f9d;&#x8d56;&#x3002;</p>
      </blockquote></li>
    </ul>
  </li>
</ul>
</div></div></div>
<div class="section">
<h2><a name="a"></a><a href="#a">&#x6d4b;&#x8bd5;</a></h2>

<div class="section">
<h3><a name="a"></a><a href="#a">&#x6d4b;&#x8bd5;&#x6837;&#x4f8b;</a></h3>

<p>&#x901a;&#x8fc7;oss&#x9879;&#x76ee;&#x9aa8;&#x67b6;&#x751f;&#x6210;&#x7684;&#x9879;&#x76ee;&#xff0c;&#x672c;&#x8eab;&#x5c31;&#x662f;&#x4e00;&#x4e2a;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x8fd0;&#x884c;&#x7684;&#x670d;&#x52a1;&#x3002;&#x5728;&#x6211;&#x4eec;&#x7684;&#x9879;&#x76ee;&#x4ee3;&#x7801;&#x91cc;&#x6709;&#x5404;&#x79cd;&#x6d4b;&#x8bd5;&#x7684;&#x6837;&#x4f8b;&#x3002; &#x4ee5; service &#x9879;&#x76ee;&#x4e3a;&#x4f8b;&#x3002;src/test &#x76ee;&#x5f55;&#x4e0b;&#x6211;&#x4eec;&#x653e;&#x7f6e;&#x4e86;&#x5982;&#x4e0b;&#x6d4b;&#x8bd5;&#xff1a;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">    .
    &#x251c;&#x2500;&#x2500; GreetingControllerDocumentation.java
    &#x251c;&#x2500;&#x2500; GreetingControllerMockMvcTests.java
    &#x251c;&#x2500;&#x2500; GreetingJsonTests.java
    &#x251c;&#x2500;&#x2500; GreetingRepositoryTests.java
    &#x251c;&#x2500;&#x2500; IsolatedGreetingControllerMockMvcTests.java
    &#x251c;&#x2500;&#x2500; ResourcesServiceMavenPluginIT.java
    &#x251c;&#x2500;&#x2500; ResourcesServiceRestAssuredIT.java
    &#x2514;&#x2500;&#x2500; ResourcesServiceRestTemplateIT.java
</pre></div></div>

<ul>
  
<li>GreetingControllerDocumentation&#x3002; &#x4f7f;&#x7528; Spring MVC Test&#xff0c;&#x901a;&#x8fc7;&#x6d4b;&#x8bd5;case&#x81ea;&#x52a8;&#x751f;&#x6210;&#x6587;&#x6863;&#xff0c;&#x6587;&#x6863;&#x4f7f;&#x7528;asciidoc&#x8fdb;&#x884c;&#x7f16;&#x5199;&#x3002;</li>
  
<li>&#x4ee5;<tt>Tests</tt>&#x7ed3;&#x5c3e;&#x7684;&#x6587;&#x4ef6;&#xff0c;&#x4ee3;&#x8868;&#x8be5;&#x6d4b;&#x8bd5;&#x7c7b;&#x6267;&#x884c;&#x7684;&#x662f;&#x5355;&#x5143;&#x6d4b;&#x8bd5;&#x3002;</li>
  
<li>&#x4ee5;<tt>IT</tt>&#x7ed3;&#x5c3e;&#x7684;&#x6587;&#x4ef6;&#xff0c;&#x4ee3;&#x8868;&#x8be5;&#x6d4b;&#x8bd5;&#x7c7b;&#x6267;&#x884c;&#x7684;&#x662f;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x3002;</li>
</ul>

<blockquote>
  
<p>&#x5bf9;&#x4e8e;&#x6d4b;&#x8bd5;&#x6837;&#x4f8b;&#x4e2d;&#x6d89;&#x53ca;&#x5230;&#x7684;&#x5404;&#x4e2a;&#x6d4b;&#x8bd5;&#x6846;&#x67b6;&#xff0c;&#x8bf7;&#x81ea;&#x884c;&#x67e5;&#x770b;&#x5b98;&#x7f51;&#x6587;&#x6863;&#x3002; </p>
</blockquote>
</div>
<div class="section">
<h3><a name="a"></a><a href="#a">&#x6d4b;&#x8bd5;&#x6587;&#x4ef6;&#x7684;&#x5206;&#x7c7b;</a></h3>

<p>&#x6211;&#x4eec;&#x5728; maven &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x4e2d;&#xff0c;&#x6307;&#x5b9a;&#x5728; mvn test&#xff08;&#x5355;&#x5143;&#x6d4b;&#x8bd5;&#xff09;&#x548c; mvn integration-test&#xff08;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#xff09;&#x8fc7;&#x7a0b;&#x6309;&#x7167;&#x6d4b;&#x8bd5;&#x6587;&#x4ef6;&#x547d;&#x540d;&#x65b9;&#x5f0f;&#xff0c;&#x6267;&#x884c;&#x76f8;&#x5e94;&#x7684;&#x6d4b;&#x8bd5;&#x3002;</p>

<p>&#x7b26;&#x5408;&#x4ee5;&#x4e0b;&#x6d4b;&#x8bd5;&#x7c7b;&#x547d;&#x540d;&#x89c4;&#x8303;&#x7684;&#x6587;&#x4ef6;&#x4f1a;&#x5728; mvn test &#x9636;&#x6bb5;&#x6267;&#x884c;: + **/*Documentation.java + **/Test*.java + **/*Test.java + **/*TestCase.java + **/*Tests.java</p>

<p>&#x7b26;&#x5408;&#x4ee5;&#x4e0b;&#x6d4b;&#x8bd5;&#x7c7b;&#x547d;&#x540d;&#x89c4;&#x8303;&#x7684;&#x6587;&#x4ef6;&#x4f1a;&#x5728; mvn integration-test &#x9636;&#x6bb5;&#x6267;&#x884c;: + **/*IT.java</p>
</div>
<div class="section">
<h3><a name="a"></a><a href="#a">&#x5bf9;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x548c;&#x7aef;&#x5230;&#x7aef;&#x6d4b;&#x8bd5;&#x7684;&#x589e;&#x5f3a;</a></h3>

<p>&#x4ee5;&#x5f80;&#x8fdb;&#x884c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#xff0c;&#x5bf9;&#x4e8e;&#x4f9d;&#x8d56;&#x7684;&#x6a21;&#x5757;/&#x670d;&#x52a1;&#xff0c;&#x901a;&#x5e38;&#x4ee5;mock&#x6570;&#x636e;&#x7684;&#x65b9;&#x5f0f;&#x6a21;&#x62df;&#x5f85;&#x6d4b;&#x8bd5;&#x7684;&#x903b;&#x8f91;&#xff0c;mock&#x6570;&#x636e;&#x4e3b;&#x8981;&#x6709;&#x4ee5;&#x4e0b;&#x4e24;&#x79cd;&#x65b9;&#x5f0f;&#xff1a; - &#x201c;&#x6869;&#x201d;&#xff0c;&#x4e0d;&#x533a;&#x5206;&#x7528;&#x6237;&#x7684;&#x8f93;&#x5165;&#xff0c;&#x6c38;&#x8fdc;&#x8fd4;&#x56de;&#x76f8;&#x540c;&#x7684;&#x6570;&#x636e; - &#x6839;&#x636e;&#x6307;&#x5b9a;&#x7684;&#x53c2;&#x6570;&#x8fd4;&#x56de;&#x9884;&#x5148;&#x8bbe;&#x5b9a;&#x597d;&#x7684;&#x6570;&#x636e;</p>

<blockquote>
  
<p>&#x5bf9;&#x4e8e;&#x7b80;&#x5355;&#x7684;&#x6d4b;&#x8bd5;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x201c;&#x6570;&#x636e;&#x6869;&#x201d;&#x7684;&#x65b9;&#x5f0f;&#x3002; </p>
</blockquote>

<p>&#x5bf9;&#x4e8e;&#x7aef;&#x5bf9;&#x7aef;&#x7684;&#x6d4b;&#x8bd5;&#xff0c;&#x5f80;&#x5f80;&#x901a;&#x8fc7;ci&#x6216;&#x8005;&#x624b;&#x52a8;&#x90e8;&#x7f72;&#x5404;&#x4e2a;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x4ee5;&#x8fdb;&#x884c;&#x6d4b;&#x8bd5;&#x3002;</p>

<p><b>&#x65b0;&#x7684;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x548c;&#x7aef;&#x5230;&#x7aef;&#x6d4b;&#x8bd5;&#x65b9;&#x6848;</b></p>

<p>&#x901a;&#x8fc7;&#x5bb9;&#x5668;&#x5316;&#x7684;&#x65b9;&#x6848;&#xff0c;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x53ea;&#x9700;&#x8981;&#x5728;pom.xml&#x6587;&#x4ef6;&#x4e2d;&#x8fdb;&#x884c;&#x914d;&#x7f6e;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x5728;ci&#x6267;&#x884c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x4e4b;&#x524d;&#x542f;&#x52a8;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x3002;&#x9488;&#x5bf9;&#x5fae;&#x670d;&#x52a1;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x7684;&#x573a;&#x666f;&#xff0c;&#x6211;&#x4eec;&#x505a;&#x4e86;&#x5982;&#x4e0b;&#x5de5;&#x4f5c;&#xff1a; + &#x5728;&#x9879;&#x76ee;&#x7684;&#x670d;&#x52a1;&#x4f9d;&#x8d56;&#x52a0;&#x5165;&#x9ed8;&#x8ba4;&#x7684;eureka&#x3001;configserver&#x3002; + &#x52a0;&#x5165;&#x7b49;&#x5f85;&#x673a;&#x5236;&#xff0c;&#x7b49;&#x5f85;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x542f;&#x52a8;&#x8d77;&#x6765;&#x5e76;&#x4e14;rpc&#x7684;&#x670d;&#x52a1;&#x5728;eureka&#x4e2d;&#x6ce8;&#x518c;&#x5e76;&#x53d1;&#x73b0;&#x81ea;&#x8eab;&#xff1b; + &#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x4ee5;&#x968f;&#x673a;&#x7aef;&#x53e3;&#x542f;&#x52a8;&#xff0c;&#x9632;&#x6b62;&#x4e0e;&#x5176;&#x4ed6;&#x7684;&#x6d4b;&#x8bd5;&#x53d1;&#x751f;&#x51b2;&#x7a81;&#x3002; + &#x53ef;&#x4ee5;&#x901a;&#x8fc7;maven docker&#x63d2;&#x4ef6;&#x7684;&#x914d;&#x7f6e;&#xff0c;&#x5b9a;&#x4e49;&#x5728;<tt>integration-test</tt>&#x9636;&#x6bb5;&#x5177;&#x4f53;&#x542f;&#x52a8;&#x4f9d;&#x8d56;&#x670d;&#x52a1;&#x7684; service &#x8fd8;&#x662f; service-test &#x955c;&#x50cf;&#x3002;</p>
</div>
<div class="section">
<h3><a name="apom.xml"></a>&#x901a;&#x8fc7;pom.xml&#x914d;&#x7f6e;&#x4f9d;&#x8d56;&#x670d;&#x52a1;</h3>

<ul>
  
<li>&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#xff0c;&#x5728;&#x672c;&#x5730;&#x542f;&#x52a8; docker &#x7684;&#x5bb9;&#x5668;&#x3002;</li>
  
<li>&#x53ef;&#x4ee5;&#x91c7;&#x7528;&#x5982;&#x4e0b;&#x65b9;&#x5f0f;&#xff0c;&#x5728; images &#x5217;&#x8868;&#x91cc;&#x6dfb;&#x52a0;&#x4f9d;&#x8d56;&#x670d;&#x52a1;&#x7684;&#x914d;&#x7f6e;
    
<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;io.fabric8&lt;/groupId&gt;
            &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;
            &lt;configuration&gt;
                &lt;images&gt;
                    &lt;!-- dependency image configuration here --&gt;
                &lt;/images&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</pre></div></div>
  </li>
  
<li>
  
<p>&#x6267;&#x884c;&#x6d4b;&#x8bd5;&#x4e4b;&#x524d;&#xff0c;&#x9700;&#x8981;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x5df2;&#x7ecf;&#x542f;&#x52a8;&#xff0c;&#x5e76;&#x4e14;&#x5728; eureka &#x6267;&#x884c;&#x4e86;&#x6ce8;&#x518c;&#x64cd;&#x4f5c;&#x3002;</p></li>
</ul>

<div class="section">
<h4><a name="a"></a><a href="#a-">&#x5982;&#x4f55;&#x786e;&#x5b9a;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x5df2;&#x7ecf;&#x6b63;&#x786e;&#x542f;&#x52a8;&#xff1f;</a></h4>

<p>&#x6211;&#x4eec;&#x63d0;&#x4f9b;&#x4e86;&#x5de5;&#x5177;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x7cfb;&#x7edf;&#x542f;&#x52a8;&#x4e4b;&#x540e;&#x68c0;&#x67e5;&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x6ce8;&#x518c;&#xff0c;&#x5e76;&#x63d0;&#x4f9b; Restful &#x4fe1;&#x606f;&#x53cd;&#x9988;&#x63a5;&#x53e3;&#x3002;</p>

<p><b>&#x4f7f;&#x7528;</b><br />+ &#x5728; pom.xml &#x4e2d;&#x5f15;&#x5165;&#x5982;&#x4e0b;&#x4f9d;&#x8d56;&#xff1a; </p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">TODO 
</pre></div></div>

<ul>
  
<li>&#x6309;&#x7167;&#x4e0a;&#x6587;&#x63cf;&#x8ff0;&#x7684;&#x65b9;&#x5f0f;&#xff0c;&#x5728;&#x76f8;&#x5173; image &#x7684;&#x914d;&#x7f6e;&#x4e2d;&#x52a0;&#x5165;&#x5982;&#x4e0b;&#x914d;&#x7f6e;&#xff1a;
    
<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;image&gt;
    &lt;!-- others --&gt;
    &lt;wait&gt;
        &lt;http&gt;
            &lt;url&gt;http://${it.eureka.host}:${it.eureka.port}&lt;/url&gt;
            &lt;method&gt;GET&lt;/method&gt;
            &lt;status&gt;200&lt;/status&gt;
        &lt;/http&gt;
        &lt;time&gt;60000&lt;/time&gt;
    &lt;/wait&gt;
    &lt;!-- others --&gt;
&lt;/image&gt;
</pre></div></div>
  </li>
</ul>

<p>&#x8fd9;&#x6837;&#x5c31;&#x53ef;&#x4ee5;&#x4fdd;&#x8bc1;&#xff0c;&#x7b49;&#x5f85;&#x4f9d;&#x8d56;&#x7684;&#x670d;&#x52a1;&#x542f;&#x52a8;&#x4e4b;&#x540e;&#xff0c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x624d;&#x5f00;&#x59cb;&#x6267;&#x884c;&#x3002;</p>
</div></div>
<div class="section">
<h3><a name="a"></a><a href="#a">&#x5efa;&#x8bae;</a></h3>

<ul>
  
<li>&#x6211;&#x4eec;&#x4e0d;&#x5efa;&#x8bae;&#x5728;&#x6267;&#x884c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x7684;&#x8fc7;&#x7a0b;&#x542f;&#x52a8;&#x8fc7;&#x591a;&#x7684;&#x4f9d;&#x8d56;&#x670d;&#x52a1;&#xff0c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;&#x8fc7;&#x7a0b;&#x5e94;&#x8be5;&#x5c3d;&#x91cf;&#x4f7f;&#x7528;dummy/fake/stub/mock&#x7b49;&#x65b9;&#x5f0f;&#x3002;</li>
  
<li>&#x5982;&#x679c;&#x670d;&#x52a1;&#x7684;&#x4f9d;&#x8d56;&#x4f17;&#x591a;&#xff0c;&#x6d4b;&#x8bd5;&#x7b49;&#x5f85;&#x8fc7;&#x7a0b;&#x4f1a;&#x975e;&#x5e38;&#x6f2b;&#x957f;&#xff0c;&#x5efa;&#x8bae;&#x53ea;&#x5728;&#x6267;&#x884c;&#x7aef;&#x5bf9;&#x7aef;&#x6d4b;&#x8bd5;&#x7684;&#x65f6;&#x5019;&#x91c7;&#x53d6;&#x8fd9;&#x79cd;&#x65b9;&#x5f0f;&#x3002;</li>
</ul>
</div></div>
<div class="section">
<h2><a name="a"></a><a href="#a">&#x6301;&#x7eed;&#x96c6;&#x6210;</a></h2>

<div class="section">
<h3><a name="a_profiles_"></a><a href="#a-profiles-">&#x9879;&#x76ee; profiles &#x8bbe;&#x7f6e;</a></h3>

<p>&#x4e3a;&#x4e86;&#x533a;&#x5206;&#x5404;&#x4e2a;&#x73af;&#x5883;&#x4ee5;&#x53ca;&#x8f6f;&#x4ef6;&#x5f00;&#x53d1;&#x7684;&#x8fc7;&#x7a0b;&#xff0c;&#x6211;&#x4eec;&#x5c06; profile &#x9700;&#x8981;&#x5206;&#x4e3a;&#x4e00;&#x4e0b; 5 &#x79cd;&#xff1a;</p>

<ul>
  
<li>development.env&#xff0c;&#x7528;&#x4e8e;&#x5f00;&#x53d1;&#x8005;&#x5728;&#x672c;&#x673a;&#x5f00;&#x53d1;&#x6d4b;&#x8bd5;&#x4f7f;&#x7528;</li>
  
<li>ut.env&#xff0c;&#x7528;&#x4e8e;ci&#x6267;&#x884c;&#x5355;&#x5143;&#x6d4b;&#x8bd5;</li>
  
<li>it.env&#xff0c;&#x7528;&#x4e8e;ci&#x6267;&#x884c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;</li>
  
<li>staging.env&#xff0c;&#x7528;&#x4e8e;QA&#x9a8c;&#x6536;&#xff0c;&#x7ebf;&#x4e0b;&#x73af;&#x5883;&#x90e8;&#x7f72;</li>
  
<li>production.env&#xff0c;&#x7528;&#x4e8e;&#x751f;&#x4ea7;&#x73af;&#x5883;&#x90e8;&#x7f72;</li>
</ul>
</div>
<div class="section">
<h3><a name="ci.sh"></a>ci.sh&#x8bf4;&#x660e;</h3>

<p>&#x4e0a;&#x6587;&#x63d0;&#x5230;&#x9879;&#x76ee;&#x7684;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x811a;&#x672c;&#x653e;&#x5728;&#x9879;&#x76ee;&#x6839;&#x76ee;&#x5f55;&#x7684; ci.sh &#x6587;&#x4ef6;&#x91cc;&#x3002;&#x8be5;&#x811a;&#x672c;&#x9ed8;&#x8ba4;&#x6709;&#x5982;&#x4e0b;&#x53c2;&#x6570;:</p>

<ul>
  
<li>
    
<p>test_and_build</p>
    
<ul>
      
<li>&#x6bcf;&#x6b21;&#x4ee3;&#x7801;&#x63d0;&#x4ea4;&#x89e6;&#x53d1;&#xff1b;</li>
      
<li>&#x4f1a;&#x6267;&#x884c;mvn test&#x4ee5;&#x53ca;&#x9879;&#x76ee;&#x6784;&#x5efa;&#x903b;&#x8f91;</li>
      
<li>&#x5e38;&#x7528;&#x4e8e;&#x5728;&#x4ee3;&#x7801;&#x63d0;&#x4ea4;&#x4e4b;&#x540e;&#x6267;&#x884c;&#x6d4b;&#x8bd5;&#x548c;&#x6784;&#x5efa;&#xff0c;&#x6d4b;&#x8bd5;&#x5305;&#x62ec;&#x5355;&#x5143;&#x6d4b;&#x8bd5;&#x548c;&#x96c6;&#x6210;&#x6d4b;&#x8bd5;</li>
    </ul>
  </li>
  
<li>
    
<p>publish_snapshot</p>
    
<ul>
      
<li>develop &#x5206;&#x652f;&#x63d0;&#x4ea4;&#x89e6;&#x53d1;&#x3002;</li>
      
<li>&#x4f1a;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x64cd;&#x4f5c;&#xff1a;
        
<ul>
          
<li>&#x9879;&#x76ee; jar &#x5305;&#x53ca; Docker &#x955c;&#x50cf;&#x6784;&#x5efa;</li>
          
<li>jar &#x5305;&#x548c; Docker &#x955c;&#x50cf;&#x53d1;&#x5e03;</li>
          
<li>&#x6839;&#x636e;&#x6587;&#x6863;&#x751f;&#x6210;&#x7684;&#x9759;&#x6001;&#x7f51;&#x7ad9;&#x53d1;&#x5e03;&#x5230; develop &#x76ee;&#x5f55;</li>
        </ul>
      </li>
    </ul>
  </li>
  
<li>
    
<p>publish_release</p>
    
<ul>
      
<li>master &#x5206;&#x652f;&#x63d0;&#x4ea4;&#x89e6;&#x53d1;&#x3002;</li>
      
<li>&#x4f1a;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x64cd;&#x4f5c;&#xff1a;
        
<ul>
          
<li>&#x9879;&#x76ee; jar &#x5305;&#x53ca; Docker &#x955c;&#x50cf;&#x6784;&#x5efa;</li>
          
<li>jar &#x5305;&#x548c; Docker &#x955c;&#x50cf;&#x53d1;&#x5e03;</li>
          
<li>jar&#x5305;&#x548c;&#x6839;&#x636e;&#x6587;&#x6863;&#x751f;&#x6210;&#x7684;&#x9759;&#x6001;&#x7f51;&#x7ad9;&#x53d1;&#x5e03;&#x5230;&#x751f;&#x4ea7;&#x73af;&#x5883;</li>
        </ul>
      </li>
    </ul>
  </li>
  
<li>
    
<p>publish_release_tag</p>
    
<ul>
      
<li>git tag&#x63d0;&#x4ea4;&#x89e6;&#x53d1;&#xff0c;tag&#x540d;&#x5b57;&#x5fc5;&#x987b;&#x9075;&#x5faa; ^release.+$ &#x89c4;&#x8303;&#xff0c;&#x4f8b;&#x5982; <tt>release-v1.0.0</tt>&#x3002;</li>
      
<li>&#x6682;&#x672a;&#x52a0;&#x5165;&#x64cd;&#x4f5c;&#x3002;</li>
    </ul>
  </li>
</ul>
</div>
<div class="section">
<h3><a name="a"></a><a href="#a">&#x6211;&#x5382;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x5b9e;&#x8df5;</a></h3>

<p>&#x6211;&#x4eec;&#x5c06;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x7684;&#x903b;&#x8f91;&#x62bd;&#x79bb;&#x51fa;&#x6765;&#x653e;&#x5230; ci.sh &#x811a;&#x672c;&#x91cc;&#xff0c;&#x8fd9;&#x6837;&#x53ef;&#x4ee5;&#x5728;&#x4efb;&#x610f;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x73af;&#x5883;&#x91cc;&#x8c03;&#x7528; ci.sh &#x5b9e;&#x73b0;&#x9879;&#x76ee;&#x7684;&#x6301;&#x7eed;&#x6d4b;&#x8bd5;&#x3001;&#x6784;&#x5efa;&#x3001;&#x53d1;&#x5e03;&#x7b49;&#x903b;&#x8f91;&#x3002; </p>

<p>&#x76ee;&#x524d;&#x6211;&#x4eec;&#x7528;&#x5230;&#x7684; ci &#x5de5;&#x5177;&#x662f; gitlab-ci&#x3002;&#x53ea;&#x9700;&#x8981;&#x5728;&#x9879;&#x76ee;&#x7684;&#x6839;&#x76ee;&#x5f55;&#x4e0b;&#x653e;&#x7f6e;&#x4e00;&#x4e2a; &#x201c;.gitlab-ci.yml&#x201d; &#x6587;&#x4ef6;&#xff0c;&#x914d;&#x7f6e;&#x597d;gitlab&#x4e8b;&#x4ef6;&#x7684;&#x89e6;&#x53d1;&#x673a;&#x5236;&#x5373;&#x53ef;&#x3002;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x901a;&#x8fc7; oss &#x9aa8;&#x67b6;&#x751f;&#x6210;&#x9879;&#x76ee;&#x4e4b;&#x540e;&#xff0c;&#x6211;&#x4eec;&#x9ed8;&#x8ba4;&#x542f;&#x7528;&#x4e86; gitlab-ci&#xff0c;&#x5e76;&#x52a0;&#x5165;&#x4e86;&#x5982;&#x4e0b;&#x914d;&#x7f6e;&#xff1a;<br />+ &#x9488;&#x5bf9;&#x4efb;&#x610f;&#x5206;&#x652f;&#x7684;&#x4ee3;&#x7801;&#x63d0;&#x4ea4;&#xff0c;&#x89e6;&#x53d1; on_every_push &#x64cd;&#x4f5c;, &#x6267;&#x884c; test_and_build &#x903b;&#x8f91;&#xff1b; + &#x9488;&#x5bf9; develop &#x5206;&#x652f;&#x7684;&#x4ee3;&#x7801;&#x63d0;&#x4ea4;&#xff0c;&#x89e6;&#x53d1; on_develop_push &#x64cd;&#x4f5c;&#xff0c;&#x6267;&#x884c; publish_snapshot &#x903b;&#x8f91;&#x3002; + &#x9488;&#x5bf9; master &#x5206;&#x652f;&#x7684;&#x4ee3;&#x7801;&#x63d0;&#x4ea4;&#xff0c;&#x89e6;&#x53d1; on_master_push &#x64cd;&#x4f5c;&#xff0c;&#x6267;&#x884c; publish_release &#x903b;&#x8f91;&#x3002;<br /> - &#x6211;&#x4eec;&#x5efa;&#x8bae;&#x9879;&#x76ee;&#x5c4f;&#x853d;&#x6389; developer &#x5411; master &#x5206;&#x652f;&#x63d0;&#x4ea4;&#x4ee3;&#x7801;&#x7684;&#x6743;&#x9650;&#xff0c;&#x6240;&#x6709;&#x5411; master &#x5206;&#x652f;&#x7684;&#x5408;&#x5e76;&#x64cd;&#x4f5c;&#x90fd;&#x901a;&#x8fc7;**&#x7ba1;&#x7406;&#x5458;**&#x5728; gitlab &#x7528;&#x6237;&#x4ea4;&#x4e92;&#x754c;&#x9762;&#x901a;&#x8fc7;&#x624b;&#x52a8;&#x70b9;&#x51fb; &#x201c;create pull request&#x201d;&#xff0c;&#x53d1;&#x8d77;&#x4ee3;&#x7801;&#x5408;&#x5e76;&#x3002; + &#x9488;&#x5bf9; git tag &#xff0c;&#x89e6;&#x53d1; on_release_tag &#x64cd;&#x4f5c;&#xff0c;&#x6267;&#x884c; publish_release_tag&#x903b;&#x8f91;&#xff0c;&#x76ee;&#x524d;&#x8fd9;&#x4e2a;&#x64cd;&#x4f5c;&#x4e0d;&#x6267;&#x884c;&#x4efb;&#x4f55;&#x4efb;&#x52a1;&#x3002;</p>

<blockquote>
  
<p>&#x56e0;&#x4e3a; test_and_build &#x64cd;&#x4f5c;&#x662f;&#x9488;&#x5bf9;&#x4efb;&#x610f;&#x5206;&#x652f;&#x7684;&#x4ee3;&#x7801;&#x53d8;&#x66f4;&#x90fd;&#x4f1a;&#x89e6;&#x53d1;&#xff0c;&#x6240;&#x4ee5;develop&#x3001;master&#x5206;&#x652f;&#x4ee5;&#x53ca;git&#x7684;tag&#x64cd;&#x4f5c;&#xff0c;&#x90fd;&#x4f1a;&#x9996;&#x5148;&#x89e6;&#x53d1; test_and_build &#x64cd;&#x4f5c;&#x3002;<br />&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x6839;&#x636e;&#x9700;&#x6c42;&#xff0c;&#x4fee;&#x6539; ci.sh &#x903b;&#x8f91;&#x4ee5;&#x53ca;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x7684;&#x5de5;&#x5177;&#x548c;&#x6d41;&#x7a0b;&#x3002;**&#x5728;&#x6ca1;&#x6709;&#x66f4;&#x597d;&#x7684;&#x5b9e;&#x73b0;&#x4e4b;&#x524d;&#xff0c;&#x5efa;&#x8bae;&#x6309;&#x7167;&#x73b0;&#x6709;&#x7684;&#x6807;&#x51c6;&#x6765;&#x6267;&#x884c;**&#x3002; </p>
</blockquote>
</div></div>
<div class="section">
<h2><a name="a"></a><a href="#a">&#x751f;&#x6210;&#x6587;&#x6863;&#x53ca;&#x9879;&#x76ee;&#x62a5;&#x544a;</a></h2>

<p>ci&#x6267;&#x884c;&#x6d4b;&#x8bd5;&#x6784;&#x5efa;&#x548c;&#x751f;&#x4ea7;&#x6784;&#x5efa;&#x65f6;&#xff0c;&#x4f1a;&#x81ea;&#x52a8;&#x4e3a;&#x9879;&#x76ee;&#x751f;&#x6210;maven site&#x7f51;&#x7ad9;&#x5185;&#x5bb9;&#x5e76;&#x53d1;&#x5e03;&#x5230; mvn-site.internal &#x7f51;&#x7ad9;&#x3002;</p>

<p>&#x5173;&#x4e8e;&#x63a5;&#x5165; oss-build &#x7684;&#x9879;&#x76ee;&#x6784;&#x5efa; maven site &#x4ee5;&#x53ca;&#x5177;&#x4f53;&#x751f;&#x6210;&#x7684;&#x7f51;&#x7ad9;&#x5185;&#x5bb9;&#xff0c;&#x8bf7;&#x53c2;&#x7167;<a class="externalLink" href="http://mvn-site.internal/oss-develop/gitbook/docs/oss/MVNSITE.html">&#x8fd9;&#x7bc7;&#x6587;&#x6863;</a>&#x3002;</p>
</div>
<div class="section">
<h2><a name="a"></a><a href="#a-">&#x6784;&#x5efa;&#x3001;&#x53d1;&#x5e03;&#x548c;&#x90e8;&#x7f72;&#x65b9;&#x6848;</a></h2>

<div class="section">
<h3><a name="a"></a><a href="#a">&#x672f;&#x8bed;&#x5b9a;&#x4e49;</a></h3>

<ul>
  
<li>&#x6784;&#x5efa;
    
<ul>
      
<li>&#x5fae;&#x670d;&#x52a1;&#x9879;&#x76ee;&#x7684;&#x6784;&#x5efa;&#x5305;&#x62ec;&#x4e24;&#x65b9;&#x9762;&#xff1a;
        
<ul>
          
<li>client &#x9879;&#x76ee;&#x9700;&#x8981;&#x6784;&#x5efa; jar &#x5305;&#xff0c;&#x65b9;&#x4fbf;&#x670d;&#x52a1;&#x7684;&#x6d88;&#x8d39;&#x65b9;&#x5f15;&#x5165;&#x4f9d;&#x8d56;&#x3002;</li>
          
<li>service &#x9879;&#x76ee;&#x9700;&#x8981;&#x6784;&#x5efa; docker &#x955c;&#x50cf;&#xff0c;&#x65b9;&#x4fbf;&#x670d;&#x52a1;&#x7684;&#x90e8;&#x7f72;&#x3002;</li>
        </ul>
      </li>
    </ul>
  </li>
  
<li>&#x53d1;&#x5e03;
    
<ul>
      
<li>&#x53d1;&#x5e03;&#x64cd;&#x4f5c;&#x5305;&#x542b;&#x4e24;&#x90e8;&#x5206;&#x5185;&#x5bb9;
        
<ul>
          
<li>client &#x9879;&#x76ee;&#x7684; jar &#x5305;&#x9700;&#x8981;&#x53d1;&#x5e03;&#x5230; nexus &#x4ed3;&#x5e93;</li>
          
<li>service &#x9879;&#x76ee;&#x9700;&#x8981;&#x6784;&#x5efa; docker &#x955c;&#x50cf;&#xff0c;&#x53d1;&#x5e03;&#x5230; docker-registry &#x4ed3;&#x5e93;&#x3002;</li>
        </ul>
      </li>
    </ul>
  </li>
  
<li>&#x90e8;&#x7f72;
    
<ul>
      
<li>&#x5c06;&#x53d1;&#x5e03;&#x5230;&#x516c;&#x53f8; docker-registry &#x4ed3;&#x5e93;&#x7684;&#x955c;&#x50cf;&#xff0c;&#x90e8;&#x7f72;&#x5230;&#x6d4b;&#x8bd5;&#x6216;&#x8005;&#x751f;&#x4ea7;&#x73af;&#x5883;&#x3002;</li>
      
<li>&#x7ba1;&#x7406;&#x5458;&#x6216;&#x8005;&#x8fd0;&#x7ef4;&#x4eba;&#x5458;&#xff0c;&#x901a;&#x8fc7;&#x5728; jenkins &#x4e0a;&#x9f20;&#x6807;&#x70b9;&#x51fb;&#x6216;&#x8005;&#x5b9a;&#x65f6;&#x64cd;&#x4f5c;&#x89e6;&#x53d1;&#x3002;</li>
    </ul>
  </li>
</ul>
</div>
<div class="section">
<h3><a name="aDocker"></a><a href="#adocker-">&#x6784;&#x5efa;Docker&#x955c;&#x50cf;&#x3002;</a></h3>

<p>&#x901a;&#x8fc7; oss &#x9aa8;&#x67b6;&#x751f;&#x6210;&#x7684;&#x9879;&#x76ee;&#xff0c;&#x9ed8;&#x8ba4;&#x652f;&#x6301;&#x5982;&#x4e0b;&#x529f;&#x80fd;&#xff1a; + &#x9879;&#x76ee;&#x7684; maven &#x914d;&#x7f6e;&#x4e2d;&#xff0c;&#x5bf9; maven &#x7684;&#x63d2;&#x4ef6;&#x3001;&#x751f;&#x547d;&#x5468;&#x671f;&#x7ba1;&#x7406;&#x7b49;&#x8fdb;&#x884c;&#x4e86;&#x5b8c;&#x5584;&#x7684;&#x914d;&#x7f6e;&#xff1b; + &#x5728; service &#x9879;&#x76ee;&#x7684; src/main/resources/docker &#x4e2d;&#x52a0;&#x5165;&#x4e86; Dockerfile&#xff0c;&#x7528;&#x4e8e;&#x6784;&#x5efa; Docker &#x955c;&#x50cf;&#xff1b; + &#x901a;&#x8fc7; maven &#x7684;&#x63d2;&#x4ef6;&#xff0c;&#x5c06;&#x9879;&#x76ee;&#x7684;&#x6784;&#x5efa;&#x3001;&#x53d1;&#x5e03;&#x64cd;&#x4f5c;&#x4e0e;maven&#x751f;&#x547d;&#x5468;&#x671f;&#x7ed1;&#x5b9a;&#x5728;&#x4e00;&#x8d77;&#x3002;  - <tt>mvn clean</tt>&#xff0c;&#x6e05;&#x7406;&#x672c;&#x5730;&#x6784;&#x5efa;&#x597d;&#x7684; jar &#x5305;&#x548c; docker &#x955c;&#x50cf;&#x3002;  - <tt>mvn package</tt>&#xff0c;&#x53ef;&#x4ee5;&#x5b8c;&#x6210;&#x4e0a;&#x6587;&#x4e2d;&#x7684;&#x201c;&#x6784;&#x5efa;&#x201d;&#x903b;&#x8f91;&#x3002;  - <tt>mvn deploy</tt>&#xff0c;&#x53ef;&#x4ee5;&#x5b8c;&#x6210;&#x4e0a;&#x9762;&#x63d0;&#x5230;&#x7684;&#x9879;&#x76ee;&#x201c;&#x53d1;&#x5e03;&#x201d;&#x903b;&#x8f91;&#x3002;</p>
</div>
<div class="section">
<h3><a name="aci"></a><a href="#aci-">&#x901a;&#x8fc7;ci&#x6267;&#x884c;&#x955c;&#x50cf;&#x7684;&#x6784;&#x5efa;&#x4e0e;&#x53d1;&#x5e03;&#x3002;</a></h3>

<ul>
  
<li>&#x5728;&#x6301;&#x7eed;&#x96c6;&#x6210;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x9ed8;&#x8ba4;&#x5728;&#x5411;develop&#x548c;master&#x5206;&#x652f;&#x63d0;&#x4ea4;&#x4ee3;&#x7801;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x6267;&#x884c;docker&#x955c;&#x50cf;&#x7684;&#x6784;&#x5efa;&#x4e0e;&#x53d1;&#x5e03;&#x3002;</li>
</ul>
</div>
<div class="section">
<h3><a name="a"></a><a href="#a">&#x6784;&#x5efa;&#x4e0e;&#x53d1;&#x5e03;&#x5206;&#x79bb;</a></h3>

<ul>
  
<li>&#x53d1;&#x5e03;&#x53ef;&#x4ee5;&#x5728;&#x4efb;&#x610f;&#x65f6;&#x95f4;&#x6267;&#x884c;&#x3002;&#x53d1;&#x5e03;&#x8fc7;&#x7a0b;&#x5931;&#x8d25;&#x4e0d;&#x4f1a;&#x6c61;&#x67d3;&#x751f;&#x4ea7;&#x7684;&#x73af;&#x5883;&#x3002;</li>
  
<li>&#x90e8;&#x7f72;&#x8fc7;&#x7a0b;&#x8282;&#x7701;&#x4e86;&#x6784;&#x5efa;&#x548c;&#x53d1;&#x5e03;&#x7684;&#x65f6;&#x95f4;&#xff0c;&#x4e0a;&#x7ebf;&#x66f4;&#x52a0;&#x8fc5;&#x901f;&#x3002;</li>
  
<li>&#x955c;&#x50cf;&#x53d1;&#x5e03;&#x5230; docker-registry&#xff0c;&#x53ef;&#x4ee5;&#x4fdd;&#x5b58;&#x955c;&#x50cf;&#x7684;&#x591a;&#x4e2a;&#x7248;&#x672c;&#x3002;</li>
  
<li>&#x5982;&#x679c;&#x751f;&#x4ea7;&#x90e8;&#x7f72;&#x5931;&#x8d25;&#xff0c;&#x53ef;&#x4ee5;&#x4ece; docker-registry &#x91cc;&#x627e;&#x5230;&#x4e4b;&#x524d;&#x7684;&#x7a33;&#x5b9a;&#x7248;&#x672c;&#xff0c;&#x5feb;&#x901f;&#x56de;&#x6eda;&#x3002;</li>
</ul></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2017.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
