<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-04-29 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170429" />
    <meta http-equiv="Content-Language" content="en" />
    <title>oss-configserver &#x2013; oss-configserver 介绍</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DOCUMENTATION <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="README.html"  title="README">README</a>
</li>
                  
                      <li>      <a href="MANUAL_FOR_USER.html"  title="用户手册">用户手册</a>
</li>
                  
                      <li>      <a href="MANUAL_FOR_ADMIN.html"  title="管理手册">管理手册</a>
</li>
                  
                      <li>      <a href="MANUAL_FOR_OPS.html"  title="运维手册">运维手册</a>
</li>
                  
                      <li>      <a href="CONTRIBUTION.html"  title="开发">开发</a>
</li>
                  
                      <li>      <a href="PERFORMANCE.html"  title="压力测试">压力测试</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="integration.html"  title="CI Management">CI Management</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Summary">Summary</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                                  <li>      <a href="license.html"  title="Licenses">Licenses</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="jacoco/index.html"  title="JaCoCo">JaCoCo</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="findbugs.html"  title="FindBugs">FindBugs</a>
</li>
                                  <li>      <a href="jdepend-report.html"  title="JDepend">JDepend</a>
</li>
                                  <li>      <a href="checkstyle.html"  title="Checkstyle">Checkstyle</a>
</li>
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="taglist.html"  title="Tag List">Tag List</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD">PMD</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>oss-configserver</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2017-04-29
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.6.OSS
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">DOCUMENTATION</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>README</a>
          </li>
                
      <li>
  
                          <a href="MANUAL_FOR_USER.html" title="用户手册">
          <span class="none"></span>
        用户手册</a>
            </li>
                
      <li>
  
                          <a href="MANUAL_FOR_ADMIN.html" title="管理手册">
          <span class="none"></span>
        管理手册</a>
            </li>
                
      <li>
  
                          <a href="MANUAL_FOR_OPS.html" title="运维手册">
          <span class="none"></span>
        运维手册</a>
            </li>
                
      <li>
  
                          <a href="CONTRIBUTION.html" title="开发">
          <span class="none"></span>
        开发</a>
            </li>
                
      <li>
  
                          <a href="PERFORMANCE.html" title="压力测试">
          <span class="none"></span>
        压力测试</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                              
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>oss-configserver &#x4ecb;&#x7ecd;</h1>

<p>configserver&#x662f;&#x4e00;&#x4e2a;&#x914d;&#x7f6e;&#x4e2d;&#x5fc3; </p>

<p>&#x5206;&#x5e03;&#x5f0f;&#x914d;&#x7f6e;&#x7ba1;&#x7406;&#x5e94;&#x8be5;&#x662f;&#x5206;&#x5e03;&#x5f0f;&#x7cfb;&#x7edf;&#x548c;&#x5fae;&#x670d;&#x52a1;&#x5e94;&#x7528;&#x7684;&#x7b2c;&#x4e00;&#x6b65;.<br />&#x60f3;&#x8c61;&#x4e00;&#x4e0b;&#x5982;&#x679c;&#x4f60;&#x6709;&#x51e0;&#x5341;&#x4e2a;&#x670d;&#x52a1;&#x6216;&#x5e94;&#x7528;&#x9700;&#x8981;&#x914d;&#x7f6e;, &#x800c;&#x4e14;&#x6bcf;&#x4e2a;&#x670d;&#x52a1;&#x8fd8;&#x5206;&#x4e3a;&#x5f00;&#x53d1;, &#x6d4b;&#x8bd5;, &#x751f;&#x4ea7;&#x7b49;&#x4e0d;&#x540c;&#x7ef4;&#x5ea6;&#x7684;&#x914d;&#x7f6e;, &#x90a3;&#x5de5;&#x4f5c;&#x91cf;&#x662f;&#x76f8;&#x5f53;&#x5927;&#x7684;, &#x800c;&#x4e14;&#x8fd8;&#x5bb9;&#x6613;&#x51fa;&#x9519;.<br />&#x5982;&#x679c;&#x80fd;&#x628a;&#x5404;&#x4e2a;&#x5e94;&#x7528;&#x7684;&#x914d;&#x7f6e;&#x4fe1;&#x606f;&#x96c6;&#x4e2d;&#x7ba1;&#x7406;&#x8d77;&#x6765;, &#x4f7f;&#x7528;&#x4e00;&#x5957;&#x673a;&#x5236;&#x6216;&#x7cfb;&#x7edf;&#x6765;&#x7ba1;&#x7406;, &#x90a3;&#x4e48;&#x5c06;&#x6781;&#x5927;&#x7684;&#x63d0;&#x9ad8;&#x7cfb;&#x7edf;&#x5f00;&#x53d1;&#x7684;&#x751f;&#x4ea7;&#x6548;&#x7387;, &#x540c;&#x65f6;&#x4e5f;&#x4f1a;&#x63d0;&#x9ad8;&#x7cfb;&#x7edf;&#x5f00;&#x53d1;&#x73af;&#x5883;&#x548c;&#x751f;&#x4ea7;&#x73af;&#x5883;&#x8fd0;&#x884c;&#x7684;&#x4e00;&#x81f4;&#x6027;. </p>

<p><img src="src/readme/configserver.png" alt="configserver.png" /></p>

<p>configserver&#x57fa;&#x4e8e;spring-cloud-config&#x5f00;&#x53d1;.<br />spring-cloud-config&#x7531;&#x670d;&#x52a1;&#x5668;&#x548c;&#x5ba2;&#x6237;&#x7aef;2&#x90e8;&#x5206;&#x7ec4;&#x6210;.<br />&#x670d;&#x52a1;&#x5668;&#x7ba1;&#x7406;&#x5404;&#x4e2a;&#x5e94;&#x7528;/&#x670d;&#x52a1;&#x5728;&#x6240;&#x6709;&#x73af;&#x5883;&#x4e0b;&#x7684;&#x5916;&#x90e8;&#x5c5e;&#x6027;.<br />&#x5ba2;&#x6237;&#x7aef;&#x4ece;&#x670d;&#x52a1;&#x5668;&#x83b7;&#x53d6;&#x6570;&#x636e;&#x5e76;&#x6784;&#x9020;&#x51fa;Spring Environment&#x548c;PropertySrouce, &#x6240;&#x4ee5;&#x975e;&#x5e38;&#x9002;&#x5408;Spring&#x5e94;&#x7528;.<br />&#x670d;&#x52a1;&#x5668;&#x4f7f;&#x7528;RESTful&#x63a5;&#x53e3;, &#x6240;&#x4ee5;&#x53ef;&#x4ee5;&#x5728;&#x4efb;&#x4f55;&#x8bed;&#x8a00;&#x5f00;&#x53d1;&#x7684;&#x4efb;&#x4f55;&#x5e94;&#x7528;&#x4e2d;&#x4f7f;&#x7528;.</p>

<div class="section">
<h2><a name="configserver_"></a><a href="#configserver-">configserver &#x7684;&#x7279;&#x6027;</a></h2>

<ol style="list-style-type: decimal">
  
<li>
  
<p>&#x652f;&#x6301;yaml&#x914d;&#x7f6e;.<br /> 1.1. &#x76f8;&#x5bf9;&#x4e8e;properties&#x6587;&#x4ef6;, yaml&#x53ef;&#x4ee5;&#x5c06;&#x76f8;&#x5173;&#x7684;&#x914d;&#x7f6e;&#x9879;&#x5206;&#x7ec4;(&#x5c42;&#x6b21;), &#x4f7f;&#x7528;&#x7f29;&#x8fdb;&#x800c;&#x4e0d;&#x7528;&#x6bcf;&#x884c;&#x90fd;&#x524d;&#x7f00;, &#x66f4;&#x6613;&#x9605;&#x8bfb;.<br /> 1.2. &#x76f8;&#x5bf9;&#x4e8e;properties&#x6587;&#x4ef6;, yaml&#x7c7b;&#x4f3c;&#x4e8e;xml&#x4f46;&#x6bd4;xml&#x7b80;&#x5355;&#x5f88;&#x591a;, &#x8868;&#x8fbe;list/array&#x7b49;&#x7ed3;&#x6784;&#x5316;&#x6570;&#x636e;&#x7684;&#x80fd;&#x529b;&#x66f4;&#x5f3a;, &#x5bf9;&#x6ce8;&#x91ca;&#x7684;&#x652f;&#x6301;&#x4e5f;&#x66f4;&#x597d;.<br /> 1.3. &#x76f8;&#x5bf9;&#x4e8e;&#x4e00;&#x7ec4;properties&#x6587;&#x4ef6;, yaml&#x53ef;&#x4ee5;&#x5c06;&#x591a;&#x4e2a;&#x73af;&#x5883;(multi-profile)&#x7684;&#x914d;&#x7f6e;&#x653e;&#x5728;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x4e2d;, &#x65b9;&#x4fbf;&#x7ef4;&#x62a4;.<br /> 1.4. &#x591a;&#x73af;&#x5883;&#x4e00;&#x81f4;&#x7684;&#x516c;&#x5171;&#x914d;&#x7f6e;&#x53ea;&#x9700;&#x5728;&#x524d;&#x9762;&#x5199;&#x4e00;&#x4efd;, &#x540e;&#x9762;&#x5404;&#x4e2a;profile&#x4e2d;&#x4e0d;&#x7528;&#x91cd;&#x590d;.<br /> 1.5. &#x4e5f;&#x53ef;&#x4ee5;&#x628a;&#x9ed8;&#x8ba4;&#x914d;&#x7f6e;&#x5199;&#x5728;&#x524d;&#x9762;, &#x540e;&#x9762;&#x5404;&#x4e2a;profile&#x4ec5;&#x9700;&#x8986;&#x5199;&#x6709;&#x53d8;&#x5316;&#x7684;&#x914d;&#x7f6e;&#x9879;&#x5373;&#x53ef;.</p></li>
  
<li>
  
<p>&#x652f;&#x6301;&#x516c;&#x53f8;&#x5168;&#x5c40;&#x7684;&#x516c;&#x5171;&#x914d;&#x7f6e;.<br /> 2.1. &#x5168;&#x5c40;&#x516c;&#x5171;&#x914d;&#x7f6e;&#x53ef;&#x4ee5;&#x51cf;&#x5c11;&#x5e94;&#x7528;&#x914d;&#x7f6e;&#x7684;&#x5de5;&#x4f5c;&#x91cf;.<br /> 2.2. &#x5168;&#x5c40;&#x516c;&#x5171;&#x914d;&#x7f6e;&#x65b9;&#x9762;&#x7ba1;&#x7406;&#x516c;&#x7528;&#x7684;&#x5e95;&#x5c42;&#x670d;&#x52a1;, &#x5982;&#x552f;&#x4e00;id, &#x77ed;&#x57df;&#x540d;, &#x7f13;&#x5b58;&#x7b49;, &#x5e94;&#x7528;&#x65e0;&#x9700;&#x5404;&#x79cd;&#x91cd;&#x590d;&#x8fd9;&#x4e9b;&#x914d;&#x7f6e;, &#x96c6;&#x7fa4;&#x53d8;&#x66f4;&#x65f6;&#x53ea;&#x9700;&#x8981;&#x7edf;&#x4e00;&#x6539;&#x4e00;&#x4e2a;&#x5730;&#x65b9;.</p></li>
  
<li>
  
<p>&#x4f7f;&#x7528;git&#x7ba1;&#x7406;&#x914d;&#x7f6e;&#x6587;&#x4ef6;.<br /> 3.1. &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;&#x7248;&#x672c;(&#x4fee;&#x6539;)&#x53ef;&#x8ffd;&#x6eaf;.<br /> 3.2. &#x53ef;&#x4ee5;&#x7acb;&#x5373;&#x5207;&#x6362;&#x5230;&#x4efb;&#x610f;&#x7248;&#x672c;&#x7684;&#x914d;&#x7f6e;, &#x4e0a;&#x7ebf;&#x51fa;&#x73b0;&#x95ee;&#x9898;&#x65f6;&#x975e;&#x5e38;&#x5bb9;&#x6613;&#x56de;&#x9000;.<br /> 3.3. &#x6bcf;&#x4e2a;&#x9879;&#x76ee;&#x7531;&#x9879;&#x76ee;&#x7ec4;&#x81ea;&#x884c;&#x7ba1;&#x7406;&#x914d;&#x7f6e;&#x6587;&#x4ef6;.</p></li>
  
<li>
  
<p>&#x5b89;&#x5168;&#x8ba4;&#x8bc1;.<br /> 4.1. &#x6bcf;&#x4e2a;&#x9879;&#x76ee;&#x6709;&#x81ea;&#x5df1;&#x7684;&#x5bc6;&#x7801;, &#x5176;&#x5b83;&#x4eba;&#x770b;&#x4e0d;&#x5230;&#x914d;&#x7f6e;&#x4fe1;&#x606f;.<br /> 4.2. &#x7ba1;&#x7406;&#x5458;&#x53ef;&#x4ee5;&#x7ba1;&#x7406;&#x7528;&#x6237;&#x5bc6;&#x7801;.</p></li>
  
<li>
  
<p>&#x914d;&#x7f6e;&#x9879;&#x52a0;&#x5bc6;.<br /> 5.1. &#x53ef;&#x4ee5;&#x5728;&#x4ee3;&#x7801;&#x5f00;&#x6e90;&#x7684;&#x540c;&#x65f6;, &#x5c06;&#x654f;&#x611f;&#x914d;&#x7f6e;&#x9879;&#x52a0;&#x5bc6;, &#x4fc3;&#x8fdb;&#x4ee3;&#x7801;&#x5f00;&#x6e90;, &#x540c;&#x65f6;&#x4e0d;&#x4f1a;&#x6cc4;&#x5bc6;.<br /> 5.2. &#x5373;&#x4f7f;&#x4ee3;&#x7801;&#x6cc4;&#x9732;&#x5230;&#x5916;&#x7f51;&#x4e5f;&#x4e0d;&#x4f1a;&#x9020;&#x6210;&#x4e25;&#x91cd;&#x5b89;&#x5168;&#x9690;&#x60a3;.</p></li>
  
<li>
  
<p>&#x4e0e;&#x670d;&#x52a1;&#x53d1;&#x73b0;&#x65e0;&#x7f1d;&#x96c6;&#x6210;, &#x53ef;&#x901a;&#x8fc7;&#x670d;&#x52a1;&#x53d1;&#x73b0;&#x4f7f;&#x7528;configserver.</p></li>
  
<li>
  
<p>&#x652f;&#x6301;&#x8fd0;&#x884c;&#x65f6;&#x914d;&#x7f6e;&#x66f4;&#x65b0;.</p></li>
</ol>

<p><a href="INTRODUCTION_OF_YML.html">YML&#x914d;&#x7f6e;&#x4ecb;&#x7ecd;</a></p>
</div>
<div class="section">
<h2><a name="configserver_"></a><a href="#configserver-">configserver &#x7684;&#x5730;&#x5740;</a></h2>

<p><a class="externalLink" href="http://oss-configserver.internal:8888/config">http://oss-configserver.internal:8888/config</a> </p>
</div>
<div class="section">
<h2><a name="aconfigserver"></a><a href="#aconfigserver">&#x5982;&#x4f55;&#x4f7f;&#x7528;configserver</a></h2>

<div class="section">
<h3><a name="a1._maven"></a>1. &#x65b0;&#x5efa;maven&#x5de5;&#x7a0b;</h3>

<p>pom.xml:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;parent&gt;
      &lt;groupId&gt;cn.home1&lt;/groupId&gt;
      &lt;artifactId&gt;oss-build&lt;/artifactId&gt;
      &lt;version&gt;${oss-build.version}&lt;/version&gt;
    &lt;/parent&gt;

    &lt;groupId&gt;cn.home1&lt;/groupId&gt;
    &lt;artifactId&gt;foo&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;properties&gt;
        &lt;spring-boot.version&gt;1.4.1.RELEASE&lt;/spring-boot.version&gt;
    &lt;/properties&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;cn.home1&lt;/groupId&gt;
                &lt;artifactId&gt;oss-release-spring-boot-${spring-boot.version}&lt;/artifactId&gt;
                &lt;version&gt;${oss-release.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;dependencies&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;
      &lt;/dependency&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
      &lt;/dependency&gt;
      &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;
      &lt;/dependency&gt;
      ...
    &lt;/dependencies&gt;
&lt;/project&gt;
</pre></div></div>

<p>src/main/java/FooApplication.java:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">@SpringBootApplication
@RefreshScope // &#x5e26;&#x6b64;&#x6ce8;&#x89e3;&#x652f;&#x6301;&#x52a8;&#x6001;&#x66f4;&#x65b0;&#x914d;&#x7f6e;
@RestController
public class FooApplication {

  @Autowired
  private Environment environment;
    
  @RequestMapping(&quot;/getProperty/{key:.+}&quot;)
  public String getProperty(@PathVariable String key) {
    return environment.getProperty(key);
  }
    
  public static void main(String[] args) {
    SpringApplication.run(FooApplication.class, args);
  }
}
</pre></div></div>

<p>src/main/resources/bootstrap.yml</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">spring.application:
  name: foo

eureka:
  instance:
    client:
      serviceUrl:
        defaultZone: http://local-eureka:8761/eureka/  # &#x4f7f;&#x7528;eureka&#x53d1;&#x73b0;configserver&#x7684;&#x5730;&#x5740;

spring.cloud:
  config:
    enabled: true
    discovery:
      enabled: true
      serviceId: local-configserver
    failFast: true
    name: foo                                       # &#x5e94;&#x7528;&#x7684;&#x540d;&#x5b57;(&#x914d;&#x7f6e;git repository&#x7684;&#x540d;&#x79f0;&#x524d;&#x7f00;)
    label: master                                   # &#x914d;&#x7f6e;git repository&#x7684;&#x5206;&#x652f;
    profile: ${ENV:development}.env                 # &#x914d;&#x7f6e;&#x7684;profile
    username: ${CONFIG_SERVER_USERNAME:user}        # &#x7528;&#x6237;&#x540d;&#x6c38;&#x8fdc;&#x4e3a;user
    password: ${CONFIG_SERVER_PASSWORD:user_pass}   # &#x5bc6;&#x7801;&#x9700;&#x8981;&#x5411;&#x57fa;&#x7840;&#x67b6;&#x6784;&#x7533;&#x8bf7;
</pre></div></div>
</div>
<div class="section">
<h3><a name="a2._"></a>2. &#x5411;&#x57fa;&#x7840;&#x67b6;&#x6784;&#x7ec4;&#x7533;&#x8bf7;&#x5e94;&#x7528;&#x5bc6;&#x7801;</h3>

<p>&#x9700;&#x63d0;&#x4ea4;&#x5e94;&#x7528;&#x540d;&#x79f0;, &#x5bc6;&#x7801;&#x53ef;&#x4ee5;&#x81ea;&#x5df1;&#x5b9a;&#x597d;&#x4e5f;&#x53ef;&#x4ee5;&#x7531;&#x57fa;&#x7840;&#x67b6;&#x6784;&#x63d0;&#x4f9b;&#x968f;&#x673a;&#x5bc6;&#x7801;.</p>

<p>&#x6b64;&#x6b65;&#x9aa4;&#x4e3b;&#x8981;&#x662f;&#x4e3a;&#x4e86;:<br />1.&#x907f;&#x514d;&#x5e94;&#x7528;/&#x670d;&#x52a1;&#x540d;&#x79f0;&#x51b2;&#x7a81;.<br />2.&#x6bcf;&#x5e94;&#x7528;&#x4e00;&#x4e2a;&#x5bc6;&#x7801;&#x589e;&#x52a0;&#x5b89;&#x5168;&#x6027;.<br />3.&#x5e2e;&#x52a9;&#x5f00;&#x53d1;&#x4eba;&#x5458;&#x521b;&#x5efa;git&#x4ed3;&#x5e93;&#x5e76;&#x8bbe;&#x7f6e;deploy key&#x4ee5;&#x4f9b;configserver&#x8bbf;&#x95ee;.</p>
</div>
<div class="section">
<h3><a name="a3._"></a>3. &#x51c6;&#x5907;&#x914d;&#x7f6e;&#x6587;&#x4ef6;</h3>

<p>&#x5b58;&#x50a8;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x7684;git&#x4ed3;&#x5e93;&#x7edf;&#x4e00;&#x653e;&#x5728;&#x4e00;&#x4e2a;group (&#x76ee;&#x524d;&#x662f;: <a class="externalLink" href="http://gitlab.internal/groups/configserver">http://gitlab.internal/groups/configserver</a>) &#x4e0b;&#x9762;.<br />&#x547d;&#x540d;&#x89c4;&#x5219;&#x662f;: &#x4ee5;&#x5e94;&#x7528;&#x540d;&#x79f0;&#x4f5c;&#x4e3a;git repository&#x7684;&#x540d;&#x79f0;&#x524d;&#x7f00;, &#x540e;&#x9762;&#x52a0;&#x4e0a;-config. &#x4f8b;&#x5982;: &#x5e94;&#x7528;&#x540d;&#x79f0;(spring.application.name)&#x4e3a;: foo<br />&#x90a3;&#x4e48;&#x914d;&#x7f6e;git&#x4ed3;&#x5e93;&#x5c31;&#x662f;: <a class="externalLink" href="http://gitlab.internal/groups/configserver/foo-config">http://gitlab.internal/groups/configserver/foo-config</a></p>

<p>clone &#x914d;&#x7f6e;git&#x4ed3;&#x5e93; <tt>git clone git@gitlab.internal:configserver/foo-config.git</tt><br />&#x521b;&#x5efa;application.yml</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># foo-config
# &#x6ce8;&#x610f;&#x683c;&#x5f0f; &#x4e0d;&#x8981;&#x7528;tab

server:
  port: 8080

test.property: default

---
spring:
  profiles: prodection.env # &#x751f;&#x4ea7;&#x73af;&#x5883;

test.property: production.env

---
spring:
  profiles: development.env # &#x5f00;&#x53d1;&#x73af;&#x5883;

test.property: development.env
</pre></div></div>

<p>&#x63d0;&#x4ea4;&#x914d;&#x7f6e;&#x6587;&#x4ef6; <tt>git add . &amp;&amp; git commit -m 'foo config' &amp;&amp; git push origin master</tt></p>

<p>&#x6b64;&#x65f6;&#x8bbf;&#x95ee;configserver&#x5e94;&#x8be5;&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x914d;&#x7f6e;&#x4fe1;&#x606f;.<br />&#x4f8b;&#x5982;: &#x5728;&#x6d4f;&#x89c8;&#x5668;&#x91cc;&#x6253;&#x5f00;<br /><a class="externalLink" href="http://${configserver-host}:8888/config/foo/default/master">http://${configserver-host}:8888/config/foo/default/master</a><br />&#x6216;<br /><a class="externalLink" href="http://${configserver-host}:8888/config/foo/development.env/master">http://${configserver-host}:8888/config/foo/development.env/master</a><br />&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x7c7b;&#x4f3c;&#x4e0b;&#x56fe;&#x7684;&#x4fe1;&#x606f;.<br /><img src="src/readme/foo_test.png" alt="" /><br />&#x53ef;&#x4ee5;&#x5bf9;&#x6bd4;&#x89c2;&#x5bdf;&#x4e00;&#x4e0b;&#x4e0d;&#x540c;&#x73af;&#x5883;&#x4e0b;&#x914d;&#x7f6e;&#x4fe1;&#x606f;&#x7684;&#x5dee;&#x5f02;.</p>

<p>&#x6ce8;&#x610f;:<br />configserver&#x4f1a;&#x81ea;&#x52a8;&#x52a0;&#x8f7d;&#x901a;&#x7528;&#x914d;&#x7f6e;(&#x5982;&#x4e0d;&#x540c;&#x73af;&#x5883;&#x4e0b;&#x4e00;&#x4e9b;&#x57fa;&#x7840;&#x670d;&#x52a1;&#x7684;&#x5730;&#x5740;&#x7b49;&#x8bbe;&#x7f6e;), &#x8fd9;&#x4e9b;&#x914d;&#x7f6e;&#x5bf9;&#x5168;&#x90e8;&#x9879;&#x76ee;&#x6709;&#x6548;, &#x9879;&#x76ee;&#x4e2d;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x4f7f;&#x7528;(&#x5982; @Value), &#x5982;&#x4e0b;&#x56fe;:<br /><img src="src/readme/common-config.png" alt="通用配置" /></p>
</div>
<div class="section">
<h3><a name="a4.__FooApplication_main"></a>4. &#x8fd0;&#x884c; FooApplication &#x7684;main&#x65b9;&#x6cd5;</h3>

<p>&#x8bbf;&#x95ee; <a class="externalLink" href="http://127.0.0.1:8080/getProperty/${key">http://127.0.0.1:8080/getProperty/${key</a>} &#x53ef;&#x4ee5;&#x53d1;&#x73b0;&#x914d;&#x7f6e;&#x5df2;&#x7ecf;&#x8bfb;&#x5230;&#x4e86;&#x7a0b;&#x5e8f;&#x4e2d;, &#x5982;&#x4e0b;&#x56fe;.<br /><img src="src/readme/foo_get_property.png" alt="getProperty" /></p>

<p>&#x5230;&#x8fd9;&#x91cc;, configserver&#x5c31;&#x914d;&#x7f6e;&#x597d;&#x4e86;.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2017.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
